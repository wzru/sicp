<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <meta name="description" content="3.3.5  Propagation of Constraints" />
    <title>
      3.3.5  Propagation of Constraints
    </title>
    
  <meta name="csrf-param" content="authenticity_token" />
  <meta name="csrf-token" content="EMTEijVc2kiiKUH4nYH0lQG3pLPfMowQ/Stg//t6DCo0e5pWMQwamnTvIdmVZqY/MqSx2IYYE+2bpNV6UNSMwQ==" />

    <!--<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.6/css/bootstrap.min.css" integrity="sha384-rwoIResjU2yc3z8GV/NPeZWAv56rSmLldC3R/AZzGRnGxQQKnKkoFVhFQhNUwEyJ" crossorigin="anonymous">
    -->
    <link href="https://fonts.googleapis.com/css?family=Inconsolata&display?swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Droid+Sans|Droid+Serif" rel="stylesheet">
    <link rel="stylesheet" media="all" href="../assets/stylesheet.css" />

   <link rel="shortcut icon" type="image/x-icon" href="../assets/favicon.ico" />

<!--    <link rel="shortcut icon" type="image/png" href="../images/lambda.png" /> -->

    <!-- for support of progressive web app, see github README, DISABLED!
    <link rel="manifest" href="../static/manifest.json">
    -->

    <script src="https://code.jquery.com/jquery-3.2.1.min.js" 
		     	  integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4="
	          crossorigin="anonymous">
    </script> 

    <script src="https://cdnjs.cloudflare.com/ajax/libs/tether/1.4.0/js/tether.min.js"></script>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.6/umd/popper.min.js" integrity="sha384-wHAiFfRlMFy6i5SRaxvfOCifBUQy1xHdJ/yoi7FRNXMRBu5WHdZYu1hA6ZOblgut" crossorigin="anonymous"></script>
    
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.2.1/js/bootstrap.min.js" integrity="sha384-B0UglyR+jN6CkvvICOB2joaf5I4l3gm9GU6Hc1og6Ls7i6U/mkkaduKaBhlAXv9k" crossorigin="anonymous"></script>

    <!-- <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.6/js/bootstrap.min.js" integrity="sha384-vBWWzlZJ8ea9aCX4pEW3rVHjgjt7zpkNpZk+02D9phzyeVkE+jo0ieGizqPLForn" crossorigin="anonymous"></script> -->
    <script type="text/javascript" 
      src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.4/latest.js?config=TeX-AMS-MML_HTMLorMML-full">
    </script>
   <!--  <script type="text/javascript" 
      src="../MathJax/MathJax.js?config=TeX-AMS-MML_HTMLorMML-full">
    </script> -->
  
    <script src="../assets/application.js"></script>
  
    <!-- Rendering inline LaTeX -->
    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({
        tex2jax: {
          inlineMath: [ ['$','$'], ["\\(","\\)"] ],
          processEscapes: true,
          jax: ["input/TeX","output/HTML-CSS"]
        }
      });
    </script>
    <!--<script src="/mathjax/MathJax.js?config=TeX-AMS_HTML-full.js" type="text/javascript"></script>-->
    <!-- Le HTML5 shim, for IE6-8 support of HTML elements -->
    <!--[if lt IE 9]>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.2/html5shiv.min.js" type="text/javascript"></script>
    <![endif]-->
  </head>
  <body>

    
    <!-- support for progressive web app, see README, DISABLED
    <script>
      if ('serviceWorker' in navigator && !navigator.serviceWorker.controller) {
          navigator.serviceWorker.register("../sw.js").then(function(reg) {
              console.log("Service worker has been registered for scope: " + reg.scope);
          });
      }
    </script>
    -->

     <nav class="navbar navbar-expand-sm navbar-dark bg-dark fixed-top justify-content-between">
       <button id="btn" class="navbar-toggler collapsed" type="button" data-toggle="collapse" data-target="#nav-sidebar" aria-controls="nav-sidebar" aria-expanded="false" aria-label="Toggle navigation" title="navigation">
         <span class="navbar-toggler-icon"></span>
       </button>
       <span class="navbar-brand-short"><a title="Go back to front page" href="../index.html" class="gray">SICP &mdash; Scheme/JS</a></span>
       <span class="navbar-brand-long" ><a title="Go back to front page" href="../index.html" class="gray">Structure and Interpretation of Computer Programs &mdash; Comparison Edition</a></span>

       <!-- edit the search engine by visiting: 
	    https://cse.google.com/cse/setup/basic?cx=015760785273492757659:nc_tznrzlsg 
	       -->
       <form class="form-inline ml-auto" id="xxx">
         <div id="search-box">
	         <script>
	           (function() {
	               var cx = "015760785273492757659:nc_tznrzlsg";
	               var gcse = document.createElement("script");
	               gcse.type = "text/javascript";
	               gcse.async = true;
	               gcse.src = "https://cse.google.com/cse.js?cx=" + cx;
	               var s = document.getElementsByTagName("script")[0];
	               s.parentNode.insertBefore(gcse, s);
	           })();
	           window.onload = function()
	           { 
	               var searchBox =  document.getElementById("gsc-i-id1");
	               searchBox.placeholder="search web edition";
	               searchBox.title="search web edition"; 
	           }
	         </script>
	         <gcse:search></gcse:search>
         </div>
       </form>
       <span class="navbar-brand-short">
         &nbsp;
         &nbsp;
         <a href="https://sicp.comp.nus.edu.sg/source/" title="Go to the Source language(s) definition(s)" class="gray">S</a>
       </span>
       <span class="navbar-brand-long">
         &nbsp;
         &nbsp;
         <a href="https://sicp.comp.nus.edu.sg/source/" title="Go to the Source language(s) definition(s)" class="gray">Source</a>
       </span>
     </nav>
     
     <div class="container scroll">

            
        <div class="collapse" id="nav-sidebar" role="tablist" aria-multiselectable="true">
        <!-- insert a dummy entry, to give one extra line of space -->
        <a class="navbar-brand" href="index.html">&nbsp;</a>
    
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-1">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-1" aria-expanded="false" aria-controls="sidebar-collapse-1">
                <a href="./foreword.html">  Foreword</a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-2">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-2" aria-expanded="false" aria-controls="sidebar-collapse-2">
                <a href="./prefaces.html">  Prefaces</a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-3">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-3" aria-expanded="false" aria-controls="sidebar-collapse-3">
                <a href="./acknowledgements.html">  Acknowledgments from Second Edition of SICP, 1996</a>
              </span>
            </h5>
          </div>
        </div>
        
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-4">
                <h5 class="mb-0">
                  <a class="sidebar-show collapsed" data-toggle="collapse" href="#sidebar-collapse-4" aria-expanded="true" aria-controls="sidebar-collapse-4">
                  &#10148;   <!-- ➤ (because this one is rendered blue on mobile: ▶  -->
                  </a>
                  <a class="sidebar-hide collapsed" data-toggle="collapse" href="#sidebar-collapse-4" aria-expanded="true" aria-controls="sidebar-collapse-4">
                  &#x25BC;    <!-- ▼ (because the corresponding one is not rendered) -->
                  </a>
                  <a href="./1.html">1  Building Abstractions with <span style="color:teal"> Procedures </span> <span style="color:blue"> Functions </span></a>
                </h5>
              </div>
    
              <div id="sidebar-collapse-4" class="collapse" role="tabpanel" aria-labelledby="headingOne">
                <div class="card-block">
            
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-5">
                <h5 class="mb-0">
                  <a class="sidebar-show collapsed" data-toggle="collapse" href="#sidebar-collapse-5" aria-expanded="true" aria-controls="sidebar-collapse-5">
                  &#10148;   <!-- ➤ (because this one is rendered blue on mobile: ▶  -->
                  </a>
                  <a class="sidebar-hide collapsed" data-toggle="collapse" href="#sidebar-collapse-5" aria-expanded="true" aria-controls="sidebar-collapse-5">
                  &#x25BC;    <!-- ▼ (because the corresponding one is not rendered) -->
                  </a>
                  <a href="./1.1.html">1.1  The Elements of Programming</a>
                </h5>
              </div>
    
              <div id="sidebar-collapse-5" class="collapse" role="tabpanel" aria-labelledby="headingOne">
                <div class="card-block">
            
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-6">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-6" aria-expanded="false" aria-controls="sidebar-collapse-6">
                <a href="./1.1.1.html"> 1.1.1  Expressions</a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-7">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-7" aria-expanded="false" aria-controls="sidebar-collapse-7">
                <a href="./1.1.2.html"> 1.1.2  Naming and the Environment</a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-8">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-8" aria-expanded="false" aria-controls="sidebar-collapse-8">
                <a href="./1.1.3.html"> 1.1.3  Evaluating <span style="color:teal"> Combinations </span> <span style="color:blue"> Operator Combinations </span></a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-9">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-9" aria-expanded="false" aria-controls="sidebar-collapse-9">
                <a href="./1.1.4.html"> 1.1.4  Compound <span style="color:teal"> Procedures </span> <span style="color:blue"> Functions </span></a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-10">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-10" aria-expanded="false" aria-controls="sidebar-collapse-10">
                <a href="./1.1.5.html"> 1.1.5  The Substitution Model for <span style="color:teal"> Procedure </span> <span style="color:blue"> Function </span> Application</a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-11">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-11" aria-expanded="false" aria-controls="sidebar-collapse-11">
                <a href="./1.1.6.html"> 1.1.6  Conditional Expressions and Predicates</a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-12">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-12" aria-expanded="false" aria-controls="sidebar-collapse-12">
                <a href="./1.1.7.html"> 1.1.7  Example: Square Roots by Newton s Method</a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-13">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-13" aria-expanded="false" aria-controls="sidebar-collapse-13">
                <a href="./1.1.8.html"> 1.1.8  <span style="color:teal"> Procedures </span> <span style="color:blue"> Functions </span> as Black-Box Abstractions</a>
              </span>
            </h5>
          </div>
        </div>
        
                </div>
              </div>
            </div>
        
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-14">
                <h5 class="mb-0">
                  <a class="sidebar-show collapsed" data-toggle="collapse" href="#sidebar-collapse-14" aria-expanded="true" aria-controls="sidebar-collapse-14">
                  &#10148;   <!-- ➤ (because this one is rendered blue on mobile: ▶  -->
                  </a>
                  <a class="sidebar-hide collapsed" data-toggle="collapse" href="#sidebar-collapse-14" aria-expanded="true" aria-controls="sidebar-collapse-14">
                  &#x25BC;    <!-- ▼ (because the corresponding one is not rendered) -->
                  </a>
                  <a href="./1.2.html">1.2  <span style="color:teal"> Procedures </span> <span style="color:blue"> Functions </span> and the Processes They Generate</a>
                </h5>
              </div>
    
              <div id="sidebar-collapse-14" class="collapse" role="tabpanel" aria-labelledby="headingOne">
                <div class="card-block">
            
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-15">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-15" aria-expanded="false" aria-controls="sidebar-collapse-15">
                <a href="./1.2.1.html"> 1.2.1  Linear Recursion and Iteration</a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-16">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-16" aria-expanded="false" aria-controls="sidebar-collapse-16">
                <a href="./1.2.2.html"> 1.2.2  Tree Recursion</a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-17">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-17" aria-expanded="false" aria-controls="sidebar-collapse-17">
                <a href="./1.2.3.html"> 1.2.3  Orders of Growth</a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-18">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-18" aria-expanded="false" aria-controls="sidebar-collapse-18">
                <a href="./1.2.4.html"> 1.2.4  Exponentiation</a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-19">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-19" aria-expanded="false" aria-controls="sidebar-collapse-19">
                <a href="./1.2.5.html"> 1.2.5  Greatest Common Divisors</a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-20">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-20" aria-expanded="false" aria-controls="sidebar-collapse-20">
                <a href="./1.2.6.html"> 1.2.6  Example: Testing for Primality</a>
              </span>
            </h5>
          </div>
        </div>
        
                </div>
              </div>
            </div>
        
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-21">
                <h5 class="mb-0">
                  <a class="sidebar-show collapsed" data-toggle="collapse" href="#sidebar-collapse-21" aria-expanded="true" aria-controls="sidebar-collapse-21">
                  &#10148;   <!-- ➤ (because this one is rendered blue on mobile: ▶  -->
                  </a>
                  <a class="sidebar-hide collapsed" data-toggle="collapse" href="#sidebar-collapse-21" aria-expanded="true" aria-controls="sidebar-collapse-21">
                  &#x25BC;    <!-- ▼ (because the corresponding one is not rendered) -->
                  </a>
                  <a href="./1.3.html">1.3  Formulating Abstractions with Higher-Order <span style="color:teal"> Procedures </span> <span style="color:blue"> Functions </span></a>
                </h5>
              </div>
    
              <div id="sidebar-collapse-21" class="collapse" role="tabpanel" aria-labelledby="headingOne">
                <div class="card-block">
            
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-22">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-22" aria-expanded="false" aria-controls="sidebar-collapse-22">
                <a href="./1.3.1.html"> 1.3.1  <span style="color:teal"> Procedures </span> <span style="color:blue"> Functions </span> as Arguments</a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-23">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-23" aria-expanded="false" aria-controls="sidebar-collapse-23">
                <a href="./1.3.2.html"> 1.3.2  <span style="color:teal"> Constructing Procedures using Lambda </span> <span style="color:blue"> Constructing Functions using Lambda Expressions </span></a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-24">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-24" aria-expanded="false" aria-controls="sidebar-collapse-24">
                <a href="./1.3.3.html"> 1.3.3  <span style="color:teal"> Procedures </span> <span style="color:blue"> Functions </span> as General Methods</a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-25">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-25" aria-expanded="false" aria-controls="sidebar-collapse-25">
                <a href="./1.3.4.html"> 1.3.4  <span style="color:teal"> Procedures </span> <span style="color:blue"> Functions </span> as Returned Values</a>
              </span>
            </h5>
          </div>
        </div>
        
                </div>
              </div>
            </div>
        
                </div>
              </div>
            </div>
        
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-26">
                <h5 class="mb-0">
                  <a class="sidebar-show collapsed" data-toggle="collapse" href="#sidebar-collapse-26" aria-expanded="true" aria-controls="sidebar-collapse-26">
                  &#10148;   <!-- ➤ (because this one is rendered blue on mobile: ▶  -->
                  </a>
                  <a class="sidebar-hide collapsed" data-toggle="collapse" href="#sidebar-collapse-26" aria-expanded="true" aria-controls="sidebar-collapse-26">
                  &#x25BC;    <!-- ▼ (because the corresponding one is not rendered) -->
                  </a>
                  <a href="./2.html">2  Building Abstractions with Data</a>
                </h5>
              </div>
    
              <div id="sidebar-collapse-26" class="collapse" role="tabpanel" aria-labelledby="headingOne">
                <div class="card-block">
            
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-27">
                <h5 class="mb-0">
                  <a class="sidebar-show collapsed" data-toggle="collapse" href="#sidebar-collapse-27" aria-expanded="true" aria-controls="sidebar-collapse-27">
                  &#10148;   <!-- ➤ (because this one is rendered blue on mobile: ▶  -->
                  </a>
                  <a class="sidebar-hide collapsed" data-toggle="collapse" href="#sidebar-collapse-27" aria-expanded="true" aria-controls="sidebar-collapse-27">
                  &#x25BC;    <!-- ▼ (because the corresponding one is not rendered) -->
                  </a>
                  <a href="./2.1.html">2.1  Introduction to Data Abstraction</a>
                </h5>
              </div>
    
              <div id="sidebar-collapse-27" class="collapse" role="tabpanel" aria-labelledby="headingOne">
                <div class="card-block">
            
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-28">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-28" aria-expanded="false" aria-controls="sidebar-collapse-28">
                <a href="./2.1.1.html"> 2.1.1  Example: Arithmetic Operations for Rational Numbers</a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-29">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-29" aria-expanded="false" aria-controls="sidebar-collapse-29">
                <a href="./2.1.2.html"> 2.1.2  Abstraction Barriers</a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-30">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-30" aria-expanded="false" aria-controls="sidebar-collapse-30">
                <a href="./2.1.3.html"> 2.1.3  What Is Meant by Data?</a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-31">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-31" aria-expanded="false" aria-controls="sidebar-collapse-31">
                <a href="./2.1.4.html"> 2.1.4  Extended Exercise: Interval Arithmetic</a>
              </span>
            </h5>
          </div>
        </div>
        
                </div>
              </div>
            </div>
        
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-32">
                <h5 class="mb-0">
                  <a class="sidebar-show collapsed" data-toggle="collapse" href="#sidebar-collapse-32" aria-expanded="true" aria-controls="sidebar-collapse-32">
                  &#10148;   <!-- ➤ (because this one is rendered blue on mobile: ▶  -->
                  </a>
                  <a class="sidebar-hide collapsed" data-toggle="collapse" href="#sidebar-collapse-32" aria-expanded="true" aria-controls="sidebar-collapse-32">
                  &#x25BC;    <!-- ▼ (because the corresponding one is not rendered) -->
                  </a>
                  <a href="./2.2.html">2.2  Hierarchical Data and the Closure Property</a>
                </h5>
              </div>
    
              <div id="sidebar-collapse-32" class="collapse" role="tabpanel" aria-labelledby="headingOne">
                <div class="card-block">
            
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-33">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-33" aria-expanded="false" aria-controls="sidebar-collapse-33">
                <a href="./2.2.1.html"> 2.2.1  Representing Sequences</a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-34">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-34" aria-expanded="false" aria-controls="sidebar-collapse-34">
                <a href="./2.2.2.html"> 2.2.2  Hierarchical Structures</a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-35">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-35" aria-expanded="false" aria-controls="sidebar-collapse-35">
                <a href="./2.2.3.html"> 2.2.3  Sequences as Conventional Interfaces</a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-36">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-36" aria-expanded="false" aria-controls="sidebar-collapse-36">
                <a href="./2.2.4.html"> 2.2.4  Example: A Picture Language</a>
              </span>
            </h5>
          </div>
        </div>
        
                </div>
              </div>
            </div>
        
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-37">
                <h5 class="mb-0">
                  <a class="sidebar-show collapsed" data-toggle="collapse" href="#sidebar-collapse-37" aria-expanded="true" aria-controls="sidebar-collapse-37">
                  &#10148;   <!-- ➤ (because this one is rendered blue on mobile: ▶  -->
                  </a>
                  <a class="sidebar-hide collapsed" data-toggle="collapse" href="#sidebar-collapse-37" aria-expanded="true" aria-controls="sidebar-collapse-37">
                  &#x25BC;    <!-- ▼ (because the corresponding one is not rendered) -->
                  </a>
                  <a href="./2.3.html">2.3  Symbolic Data</a>
                </h5>
              </div>
    
              <div id="sidebar-collapse-37" class="collapse" role="tabpanel" aria-labelledby="headingOne">
                <div class="card-block">
            
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-38">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-38" aria-expanded="false" aria-controls="sidebar-collapse-38">
                <a href="./2.3.1.html"> 2.3.1  <span style="color:teal"> Quotation </span> <span style="color:blue"> Strings </span></a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-39">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-39" aria-expanded="false" aria-controls="sidebar-collapse-39">
                <a href="./2.3.2.html"> 2.3.2  Example: Symbolic Differentiation</a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-40">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-40" aria-expanded="false" aria-controls="sidebar-collapse-40">
                <a href="./2.3.3.html"> 2.3.3  Example: Representing Sets</a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-41">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-41" aria-expanded="false" aria-controls="sidebar-collapse-41">
                <a href="./2.3.4.html"> 2.3.4  Example: Huffman Encoding Trees</a>
              </span>
            </h5>
          </div>
        </div>
        
                </div>
              </div>
            </div>
        
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-42">
                <h5 class="mb-0">
                  <a class="sidebar-show collapsed" data-toggle="collapse" href="#sidebar-collapse-42" aria-expanded="true" aria-controls="sidebar-collapse-42">
                  &#10148;   <!-- ➤ (because this one is rendered blue on mobile: ▶  -->
                  </a>
                  <a class="sidebar-hide collapsed" data-toggle="collapse" href="#sidebar-collapse-42" aria-expanded="true" aria-controls="sidebar-collapse-42">
                  &#x25BC;    <!-- ▼ (because the corresponding one is not rendered) -->
                  </a>
                  <a href="./2.4.html">2.4  Multiple Representations for Abstract Data</a>
                </h5>
              </div>
    
              <div id="sidebar-collapse-42" class="collapse" role="tabpanel" aria-labelledby="headingOne">
                <div class="card-block">
            
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-43">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-43" aria-expanded="false" aria-controls="sidebar-collapse-43">
                <a href="./2.4.1.html"> 2.4.1  Representations for Complex Numbers</a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-44">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-44" aria-expanded="false" aria-controls="sidebar-collapse-44">
                <a href="./2.4.2.html"> 2.4.2  Tagged data</a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-45">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-45" aria-expanded="false" aria-controls="sidebar-collapse-45">
                <a href="./2.4.3.html"> 2.4.3  Data-Directed Programming and Additivity</a>
              </span>
            </h5>
          </div>
        </div>
        
                </div>
              </div>
            </div>
        
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-46">
                <h5 class="mb-0">
                  <a class="sidebar-show collapsed" data-toggle="collapse" href="#sidebar-collapse-46" aria-expanded="true" aria-controls="sidebar-collapse-46">
                  &#10148;   <!-- ➤ (because this one is rendered blue on mobile: ▶  -->
                  </a>
                  <a class="sidebar-hide collapsed" data-toggle="collapse" href="#sidebar-collapse-46" aria-expanded="true" aria-controls="sidebar-collapse-46">
                  &#x25BC;    <!-- ▼ (because the corresponding one is not rendered) -->
                  </a>
                  <a href="./2.5.html">2.5  Systems with Generic Operations</a>
                </h5>
              </div>
    
              <div id="sidebar-collapse-46" class="collapse" role="tabpanel" aria-labelledby="headingOne">
                <div class="card-block">
            
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-47">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-47" aria-expanded="false" aria-controls="sidebar-collapse-47">
                <a href="./2.5.1.html"> 2.5.1  Generic Arithmetic Operations</a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-48">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-48" aria-expanded="false" aria-controls="sidebar-collapse-48">
                <a href="./2.5.2.html"> 2.5.2  Combining Data of Different Types</a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-49">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-49" aria-expanded="false" aria-controls="sidebar-collapse-49">
                <a href="./2.5.3.html"> 2.5.3  Example: Symbolic Algebra</a>
              </span>
            </h5>
          </div>
        </div>
        
                </div>
              </div>
            </div>
        
                </div>
              </div>
            </div>
        
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-50">
                <h5 class="mb-0">
                  <a class="sidebar-show collapsed" data-toggle="collapse" href="#sidebar-collapse-50" aria-expanded="true" aria-controls="sidebar-collapse-50">
                  &#10148;   <!-- ➤ (because this one is rendered blue on mobile: ▶  -->
                  </a>
                  <a class="sidebar-hide collapsed" data-toggle="collapse" href="#sidebar-collapse-50" aria-expanded="true" aria-controls="sidebar-collapse-50">
                  &#x25BC;    <!-- ▼ (because the corresponding one is not rendered) -->
                  </a>
                  <a href="./3.html">3  Modularity, Objects, and State</a>
                </h5>
              </div>
    
              <div id="sidebar-collapse-50" class="collapse" role="tabpanel" aria-labelledby="headingOne">
                <div class="card-block">
            
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-51">
                <h5 class="mb-0">
                  <a class="sidebar-show collapsed" data-toggle="collapse" href="#sidebar-collapse-51" aria-expanded="true" aria-controls="sidebar-collapse-51">
                  &#10148;   <!-- ➤ (because this one is rendered blue on mobile: ▶  -->
                  </a>
                  <a class="sidebar-hide collapsed" data-toggle="collapse" href="#sidebar-collapse-51" aria-expanded="true" aria-controls="sidebar-collapse-51">
                  &#x25BC;    <!-- ▼ (because the corresponding one is not rendered) -->
                  </a>
                  <a href="./3.1.html">3.1  Assignment and Local State</a>
                </h5>
              </div>
    
              <div id="sidebar-collapse-51" class="collapse" role="tabpanel" aria-labelledby="headingOne">
                <div class="card-block">
            
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-52">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-52" aria-expanded="false" aria-controls="sidebar-collapse-52">
                <a href="./3.1.1.html"> 3.1.1  Local State Variables</a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-53">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-53" aria-expanded="false" aria-controls="sidebar-collapse-53">
                <a href="./3.1.2.html"> 3.1.2  The Benefits of Introducing Assignment</a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-54">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-54" aria-expanded="false" aria-controls="sidebar-collapse-54">
                <a href="./3.1.3.html"> 3.1.3  The Costs of Introducing Assignment</a>
              </span>
            </h5>
          </div>
        </div>
        
                </div>
              </div>
            </div>
        
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-55">
                <h5 class="mb-0">
                  <a class="sidebar-show collapsed" data-toggle="collapse" href="#sidebar-collapse-55" aria-expanded="true" aria-controls="sidebar-collapse-55">
                  &#10148;   <!-- ➤ (because this one is rendered blue on mobile: ▶  -->
                  </a>
                  <a class="sidebar-hide collapsed" data-toggle="collapse" href="#sidebar-collapse-55" aria-expanded="true" aria-controls="sidebar-collapse-55">
                  &#x25BC;    <!-- ▼ (because the corresponding one is not rendered) -->
                  </a>
                  <a href="./3.2.html">3.2  The Environment Model of Evaluation</a>
                </h5>
              </div>
    
              <div id="sidebar-collapse-55" class="collapse" role="tabpanel" aria-labelledby="headingOne">
                <div class="card-block">
            
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-56">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-56" aria-expanded="false" aria-controls="sidebar-collapse-56">
                <a href="./3.2.1.html"> 3.2.1  The Rules for Evaluation</a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-57">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-57" aria-expanded="false" aria-controls="sidebar-collapse-57">
                <a href="./3.2.2.html"> 3.2.2  Applying Simple <span style="color:teal"> Procedures </span> <span style="color:blue"> Functions </span></a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-58">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-58" aria-expanded="false" aria-controls="sidebar-collapse-58">
                <a href="./3.2.3.html"> 3.2.3  Frames as the Repository of Local State</a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-59">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-59" aria-expanded="false" aria-controls="sidebar-collapse-59">
                <a href="./3.2.4.html"> 3.2.4  Internal <span style="color:teal"> Definitions </span> <span style="color:blue"> Declarations </span></a>
              </span>
            </h5>
          </div>
        </div>
        
                </div>
              </div>
            </div>
        
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-60">
                <h5 class="mb-0">
                  <a class="sidebar-show collapsed" data-toggle="collapse" href="#sidebar-collapse-60" aria-expanded="true" aria-controls="sidebar-collapse-60">
                  &#10148;   <!-- ➤ (because this one is rendered blue on mobile: ▶  -->
                  </a>
                  <a class="sidebar-hide collapsed" data-toggle="collapse" href="#sidebar-collapse-60" aria-expanded="true" aria-controls="sidebar-collapse-60">
                  &#x25BC;    <!-- ▼ (because the corresponding one is not rendered) -->
                  </a>
                  <a href="./3.3.html">3.3  Modeling with Mutable Data</a>
                </h5>
              </div>
    
              <div id="sidebar-collapse-60" class="collapse" role="tabpanel" aria-labelledby="headingOne">
                <div class="card-block">
            
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-61">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-61" aria-expanded="false" aria-controls="sidebar-collapse-61">
                <a href="./3.3.1.html"> 3.3.1  Mutable List Structure</a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-62">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-62" aria-expanded="false" aria-controls="sidebar-collapse-62">
                <a href="./3.3.2.html"> 3.3.2  Representing Queues</a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-63">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-63" aria-expanded="false" aria-controls="sidebar-collapse-63">
                <a href="./3.3.3.html"> 3.3.3  Representing Tables</a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-64">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-64" aria-expanded="false" aria-controls="sidebar-collapse-64">
                <a href="./3.3.4.html"> 3.3.4  A Simulator for Digital Circuits</a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-65">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-65" aria-expanded="false" aria-controls="sidebar-collapse-65">
                <a href="./3.3.5.html"> 3.3.5  Propagation of Constraints</a>
              </span>
            </h5>
          </div>
        </div>
        
                </div>
              </div>
            </div>
        
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-66">
                <h5 class="mb-0">
                  <a class="sidebar-show collapsed" data-toggle="collapse" href="#sidebar-collapse-66" aria-expanded="true" aria-controls="sidebar-collapse-66">
                  &#10148;   <!-- ➤ (because this one is rendered blue on mobile: ▶  -->
                  </a>
                  <a class="sidebar-hide collapsed" data-toggle="collapse" href="#sidebar-collapse-66" aria-expanded="true" aria-controls="sidebar-collapse-66">
                  &#x25BC;    <!-- ▼ (because the corresponding one is not rendered) -->
                  </a>
                  <a href="./3.4.html">3.4  Concurrency: Time Is of the Essence</a>
                </h5>
              </div>
    
              <div id="sidebar-collapse-66" class="collapse" role="tabpanel" aria-labelledby="headingOne">
                <div class="card-block">
            
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-67">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-67" aria-expanded="false" aria-controls="sidebar-collapse-67">
                <a href="./3.4.1.html"> 3.4.1  The Nature of Time in Concurrent Systems</a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-68">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-68" aria-expanded="false" aria-controls="sidebar-collapse-68">
                <a href="./3.4.2.html"> 3.4.2  Mechanisms for Controlling Concurrency</a>
              </span>
            </h5>
          </div>
        </div>
        
                </div>
              </div>
            </div>
        
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-69">
                <h5 class="mb-0">
                  <a class="sidebar-show collapsed" data-toggle="collapse" href="#sidebar-collapse-69" aria-expanded="true" aria-controls="sidebar-collapse-69">
                  &#10148;   <!-- ➤ (because this one is rendered blue on mobile: ▶  -->
                  </a>
                  <a class="sidebar-hide collapsed" data-toggle="collapse" href="#sidebar-collapse-69" aria-expanded="true" aria-controls="sidebar-collapse-69">
                  &#x25BC;    <!-- ▼ (because the corresponding one is not rendered) -->
                  </a>
                  <a href="./3.5.html">3.5  Streams</a>
                </h5>
              </div>
    
              <div id="sidebar-collapse-69" class="collapse" role="tabpanel" aria-labelledby="headingOne">
                <div class="card-block">
            
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-70">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-70" aria-expanded="false" aria-controls="sidebar-collapse-70">
                <a href="./3.5.1.html"> 3.5.1  Streams Are Delayed Lists</a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-71">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-71" aria-expanded="false" aria-controls="sidebar-collapse-71">
                <a href="./3.5.2.html"> 3.5.2  Infinite Streams</a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-72">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-72" aria-expanded="false" aria-controls="sidebar-collapse-72">
                <a href="./3.5.3.html"> 3.5.3  Exploiting the Stream Paradigm</a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-73">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-73" aria-expanded="false" aria-controls="sidebar-collapse-73">
                <a href="./3.5.4.html"> 3.5.4  Streams and Delayed Evaluation</a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-74">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-74" aria-expanded="false" aria-controls="sidebar-collapse-74">
                <a href="./3.5.5.html"> 3.5.5  Modularity of Functional Programs and Modularity of Objects</a>
              </span>
            </h5>
          </div>
        </div>
        
                </div>
              </div>
            </div>
        
                </div>
              </div>
            </div>
        
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-75">
                <h5 class="mb-0">
                  <a class="sidebar-show collapsed" data-toggle="collapse" href="#sidebar-collapse-75" aria-expanded="true" aria-controls="sidebar-collapse-75">
                  &#10148;   <!-- ➤ (because this one is rendered blue on mobile: ▶  -->
                  </a>
                  <a class="sidebar-hide collapsed" data-toggle="collapse" href="#sidebar-collapse-75" aria-expanded="true" aria-controls="sidebar-collapse-75">
                  &#x25BC;    <!-- ▼ (because the corresponding one is not rendered) -->
                  </a>
                  <a href="./4.html">4  Metalinguistic Abstraction</a>
                </h5>
              </div>
    
              <div id="sidebar-collapse-75" class="collapse" role="tabpanel" aria-labelledby="headingOne">
                <div class="card-block">
            
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-76">
                <h5 class="mb-0">
                  <a class="sidebar-show collapsed" data-toggle="collapse" href="#sidebar-collapse-76" aria-expanded="true" aria-controls="sidebar-collapse-76">
                  &#10148;   <!-- ➤ (because this one is rendered blue on mobile: ▶  -->
                  </a>
                  <a class="sidebar-hide collapsed" data-toggle="collapse" href="#sidebar-collapse-76" aria-expanded="true" aria-controls="sidebar-collapse-76">
                  &#x25BC;    <!-- ▼ (because the corresponding one is not rendered) -->
                  </a>
                  <a href="./4.1.html">4.1  The Metacircular Evaluator</a>
                </h5>
              </div>
    
              <div id="sidebar-collapse-76" class="collapse" role="tabpanel" aria-labelledby="headingOne">
                <div class="card-block">
            
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-77">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-77" aria-expanded="false" aria-controls="sidebar-collapse-77">
                <a href="./4.1.1.html"> 4.1.1  The Core of the Evaluator</a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-78">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-78" aria-expanded="false" aria-controls="sidebar-collapse-78">
                <a href="./4.1.2.html"> 4.1.2  Representing <span style="color:teal"> Expressions </span> <span style="color:blue"> Statements and Expressions </span></a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-79">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-79" aria-expanded="false" aria-controls="sidebar-collapse-79">
                <a href="./4.1.3.html"> 4.1.3  Evaluator Data Structures</a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-80">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-80" aria-expanded="false" aria-controls="sidebar-collapse-80">
                <a href="./4.1.4.html"> 4.1.4  Running the Evaluator as a Program</a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-81">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-81" aria-expanded="false" aria-controls="sidebar-collapse-81">
                <a href="./4.1.5.html"> 4.1.5  Data as Programs</a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-82">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-82" aria-expanded="false" aria-controls="sidebar-collapse-82">
                <a href="./4.1.6.html"> 4.1.6  Internal <span style="color:teal"> Definitions </span> <span style="color:blue"> Declarations </span></a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-83">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-83" aria-expanded="false" aria-controls="sidebar-collapse-83">
                <a href="./4.1.7.html"> 4.1.7  Separating Syntactic Analysis from Execution</a>
              </span>
            </h5>
          </div>
        </div>
        
                </div>
              </div>
            </div>
        
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-84">
                <h5 class="mb-0">
                  <a class="sidebar-show collapsed" data-toggle="collapse" href="#sidebar-collapse-84" aria-expanded="true" aria-controls="sidebar-collapse-84">
                  &#10148;   <!-- ➤ (because this one is rendered blue on mobile: ▶  -->
                  </a>
                  <a class="sidebar-hide collapsed" data-toggle="collapse" href="#sidebar-collapse-84" aria-expanded="true" aria-controls="sidebar-collapse-84">
                  &#x25BC;    <!-- ▼ (because the corresponding one is not rendered) -->
                  </a>
                  <a href="./4.2.html">4.2  <span style="color:teal"> Variations on a Scheme: </span> Lazy Evaluation</a>
                </h5>
              </div>
    
              <div id="sidebar-collapse-84" class="collapse" role="tabpanel" aria-labelledby="headingOne">
                <div class="card-block">
            
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-85">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-85" aria-expanded="false" aria-controls="sidebar-collapse-85">
                <a href="./4.2.1.html"> 4.2.1  Normal Order and Applicative Order</a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-86">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-86" aria-expanded="false" aria-controls="sidebar-collapse-86">
                <a href="./4.2.2.html"> 4.2.2  An Interpreter with Lazy Evaluation</a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-87">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-87" aria-expanded="false" aria-controls="sidebar-collapse-87">
                <a href="./4.2.3.html"> 4.2.3  Streams as Lazy Lists</a>
              </span>
            </h5>
          </div>
        </div>
        
                </div>
              </div>
            </div>
        
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-88">
                <h5 class="mb-0">
                  <a class="sidebar-show collapsed" data-toggle="collapse" href="#sidebar-collapse-88" aria-expanded="true" aria-controls="sidebar-collapse-88">
                  &#10148;   <!-- ➤ (because this one is rendered blue on mobile: ▶  -->
                  </a>
                  <a class="sidebar-hide collapsed" data-toggle="collapse" href="#sidebar-collapse-88" aria-expanded="true" aria-controls="sidebar-collapse-88">
                  &#x25BC;    <!-- ▼ (because the corresponding one is not rendered) -->
                  </a>
                  <a href="./4.3.html">4.3  <span style="color:teal"> Variations on a Scheme: </span> Nondeterministic Computing</a>
                </h5>
              </div>
    
              <div id="sidebar-collapse-88" class="collapse" role="tabpanel" aria-labelledby="headingOne">
                <div class="card-block">
            
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-89">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-89" aria-expanded="false" aria-controls="sidebar-collapse-89">
                <a href="./4.3.1.html"> 4.3.1  Amb and Search</a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-90">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-90" aria-expanded="false" aria-controls="sidebar-collapse-90">
                <a href="./4.3.2.html"> 4.3.2  Examples of Nondeterministic Programs</a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-91">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-91" aria-expanded="false" aria-controls="sidebar-collapse-91">
                <a href="./4.3.3.html"> 4.3.3  Implementing the <span style="color:teal"> Amb </span> <span style="color:blue"> amb </span> Evaluator</a>
              </span>
            </h5>
          </div>
        </div>
        
                </div>
              </div>
            </div>
        
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-92">
                <h5 class="mb-0">
                  <a class="sidebar-show collapsed" data-toggle="collapse" href="#sidebar-collapse-92" aria-expanded="true" aria-controls="sidebar-collapse-92">
                  &#10148;   <!-- ➤ (because this one is rendered blue on mobile: ▶  -->
                  </a>
                  <a class="sidebar-hide collapsed" data-toggle="collapse" href="#sidebar-collapse-92" aria-expanded="true" aria-controls="sidebar-collapse-92">
                  &#x25BC;    <!-- ▼ (because the corresponding one is not rendered) -->
                  </a>
                  <a href="./4.4.html">4.4  Logic Programming</a>
                </h5>
              </div>
    
              <div id="sidebar-collapse-92" class="collapse" role="tabpanel" aria-labelledby="headingOne">
                <div class="card-block">
            
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-93">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-93" aria-expanded="false" aria-controls="sidebar-collapse-93">
                <a href="./4.4.1.html"> 4.4.1  Deductive Information Retrieval</a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-94">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-94" aria-expanded="false" aria-controls="sidebar-collapse-94">
                <a href="./4.4.2.html"> 4.4.2  How the Query System Works</a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-95">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-95" aria-expanded="false" aria-controls="sidebar-collapse-95">
                <a href="./4.4.3.html"> 4.4.3  Is Logic Programming Mathematical Logic?</a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-96">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-96" aria-expanded="false" aria-controls="sidebar-collapse-96">
                <a href="./4.4.4.html"> 4.4.4  Implementing the Query System</a>
              </span>
            </h5>
          </div>
        </div>
        
                </div>
              </div>
            </div>
        
                </div>
              </div>
            </div>
        
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-97">
                <h5 class="mb-0">
                  <a class="sidebar-show collapsed" data-toggle="collapse" href="#sidebar-collapse-97" aria-expanded="true" aria-controls="sidebar-collapse-97">
                  &#10148;   <!-- ➤ (because this one is rendered blue on mobile: ▶  -->
                  </a>
                  <a class="sidebar-hide collapsed" data-toggle="collapse" href="#sidebar-collapse-97" aria-expanded="true" aria-controls="sidebar-collapse-97">
                  &#x25BC;    <!-- ▼ (because the corresponding one is not rendered) -->
                  </a>
                  <a href="./5.html">5  Computing with Register Machines</a>
                </h5>
              </div>
    
              <div id="sidebar-collapse-97" class="collapse" role="tabpanel" aria-labelledby="headingOne">
                <div class="card-block">
            
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-98">
                <h5 class="mb-0">
                  <a class="sidebar-show collapsed" data-toggle="collapse" href="#sidebar-collapse-98" aria-expanded="true" aria-controls="sidebar-collapse-98">
                  &#10148;   <!-- ➤ (because this one is rendered blue on mobile: ▶  -->
                  </a>
                  <a class="sidebar-hide collapsed" data-toggle="collapse" href="#sidebar-collapse-98" aria-expanded="true" aria-controls="sidebar-collapse-98">
                  &#x25BC;    <!-- ▼ (because the corresponding one is not rendered) -->
                  </a>
                  <a href="./5.1.html">5.1  Designing Register Machines</a>
                </h5>
              </div>
    
              <div id="sidebar-collapse-98" class="collapse" role="tabpanel" aria-labelledby="headingOne">
                <div class="card-block">
            
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-99">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-99" aria-expanded="false" aria-controls="sidebar-collapse-99">
                <a href="./5.1.1.html"> 5.1.1  A Language for Describing Register Machines</a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-100">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-100" aria-expanded="false" aria-controls="sidebar-collapse-100">
                <a href="./5.1.2.html"> 5.1.2  Abstraction in Machine Design</a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-101">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-101" aria-expanded="false" aria-controls="sidebar-collapse-101">
                <a href="./5.1.3.html"> 5.1.3  Subroutines</a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-102">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-102" aria-expanded="false" aria-controls="sidebar-collapse-102">
                <a href="./5.1.4.html"> 5.1.4  Using a Stack to Implement Recursion</a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-103">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-103" aria-expanded="false" aria-controls="sidebar-collapse-103">
                <a href="./5.1.5.html"> 5.1.5  Instruction Summary</a>
              </span>
            </h5>
          </div>
        </div>
        
                </div>
              </div>
            </div>
        
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-104">
                <h5 class="mb-0">
                  <a class="sidebar-show collapsed" data-toggle="collapse" href="#sidebar-collapse-104" aria-expanded="true" aria-controls="sidebar-collapse-104">
                  &#10148;   <!-- ➤ (because this one is rendered blue on mobile: ▶  -->
                  </a>
                  <a class="sidebar-hide collapsed" data-toggle="collapse" href="#sidebar-collapse-104" aria-expanded="true" aria-controls="sidebar-collapse-104">
                  &#x25BC;    <!-- ▼ (because the corresponding one is not rendered) -->
                  </a>
                  <a href="./5.2.html">5.2  A Register-Machine Simulator</a>
                </h5>
              </div>
    
              <div id="sidebar-collapse-104" class="collapse" role="tabpanel" aria-labelledby="headingOne">
                <div class="card-block">
            
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-105">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-105" aria-expanded="false" aria-controls="sidebar-collapse-105">
                <a href="./5.2.1.html"> 5.2.1  The Machine Model</a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-106">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-106" aria-expanded="false" aria-controls="sidebar-collapse-106">
                <a href="./5.2.2.html"> 5.2.2  The Assembler</a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-107">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-107" aria-expanded="false" aria-controls="sidebar-collapse-107">
                <a href="./5.2.3.html"> 5.2.3  Generating Execution <span style="color:teal"> Procedures </span> <span style="color:blue"> Functions </span> for Instructions</a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-108">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-108" aria-expanded="false" aria-controls="sidebar-collapse-108">
                <a href="./5.2.4.html"> 5.2.4  Monitoring Machine Performance</a>
              </span>
            </h5>
          </div>
        </div>
        
                </div>
              </div>
            </div>
        
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-109">
                <h5 class="mb-0">
                  <a class="sidebar-show collapsed" data-toggle="collapse" href="#sidebar-collapse-109" aria-expanded="true" aria-controls="sidebar-collapse-109">
                  &#10148;   <!-- ➤ (because this one is rendered blue on mobile: ▶  -->
                  </a>
                  <a class="sidebar-hide collapsed" data-toggle="collapse" href="#sidebar-collapse-109" aria-expanded="true" aria-controls="sidebar-collapse-109">
                  &#x25BC;    <!-- ▼ (because the corresponding one is not rendered) -->
                  </a>
                  <a href="./5.3.html">5.3  Storage Allocation and Garbage Collection</a>
                </h5>
              </div>
    
              <div id="sidebar-collapse-109" class="collapse" role="tabpanel" aria-labelledby="headingOne">
                <div class="card-block">
            
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-110">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-110" aria-expanded="false" aria-controls="sidebar-collapse-110">
                <a href="./5.3.1.html"> 5.3.1  Memory as Vectors</a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-111">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-111" aria-expanded="false" aria-controls="sidebar-collapse-111">
                <a href="./5.3.2.html"> 5.3.2  Maintaining the Illusion of Infinite Memory</a>
              </span>
            </h5>
          </div>
        </div>
        
                </div>
              </div>
            </div>
        
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-112">
                <h5 class="mb-0">
                  <a class="sidebar-show collapsed" data-toggle="collapse" href="#sidebar-collapse-112" aria-expanded="true" aria-controls="sidebar-collapse-112">
                  &#10148;   <!-- ➤ (because this one is rendered blue on mobile: ▶  -->
                  </a>
                  <a class="sidebar-hide collapsed" data-toggle="collapse" href="#sidebar-collapse-112" aria-expanded="true" aria-controls="sidebar-collapse-112">
                  &#x25BC;    <!-- ▼ (because the corresponding one is not rendered) -->
                  </a>
                  <a href="./5.4.html">5.4  The Explicit-Control Evaluator</a>
                </h5>
              </div>
    
              <div id="sidebar-collapse-112" class="collapse" role="tabpanel" aria-labelledby="headingOne">
                <div class="card-block">
            
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-113">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-113" aria-expanded="false" aria-controls="sidebar-collapse-113">
                <a href="./5.4.1.html"> 5.4.1  The Core of the Explicit-Control Evaluator</a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-114">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-114" aria-expanded="false" aria-controls="sidebar-collapse-114">
                <a href="./5.4.2.html"> 5.4.2  Sequence Evaluation and Tail Recursion</a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-115">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-115" aria-expanded="false" aria-controls="sidebar-collapse-115">
                <a href="./5.4.3.html"> 5.4.3  Conditionals, Assignments, and Definitions</a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-116">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-116" aria-expanded="false" aria-controls="sidebar-collapse-116">
                <a href="./5.4.4.html"> 5.4.4  Running the Evaluator</a>
              </span>
            </h5>
          </div>
        </div>
        
                </div>
              </div>
            </div>
        
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-117">
                <h5 class="mb-0">
                  <a class="sidebar-show collapsed" data-toggle="collapse" href="#sidebar-collapse-117" aria-expanded="true" aria-controls="sidebar-collapse-117">
                  &#10148;   <!-- ➤ (because this one is rendered blue on mobile: ▶  -->
                  </a>
                  <a class="sidebar-hide collapsed" data-toggle="collapse" href="#sidebar-collapse-117" aria-expanded="true" aria-controls="sidebar-collapse-117">
                  &#x25BC;    <!-- ▼ (because the corresponding one is not rendered) -->
                  </a>
                  <a href="./5.5.html">5.5  Compilation</a>
                </h5>
              </div>
    
              <div id="sidebar-collapse-117" class="collapse" role="tabpanel" aria-labelledby="headingOne">
                <div class="card-block">
            
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-118">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-118" aria-expanded="false" aria-controls="sidebar-collapse-118">
                <a href="./5.5.1.html"> 5.5.1  Structure of the Compiler</a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-119">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-119" aria-expanded="false" aria-controls="sidebar-collapse-119">
                <a href="./5.5.2.html"> 5.5.2  Compiling Expressions</a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-120">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-120" aria-expanded="false" aria-controls="sidebar-collapse-120">
                <a href="./5.5.3.html"> 5.5.3  Compiling Combinations</a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-121">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-121" aria-expanded="false" aria-controls="sidebar-collapse-121">
                <a href="./5.5.4.html"> 5.5.4  Combining Instruction Sequences</a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-122">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-122" aria-expanded="false" aria-controls="sidebar-collapse-122">
                <a href="./5.5.5.html"> 5.5.5  An Example of Compiled Code</a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-123">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-123" aria-expanded="false" aria-controls="sidebar-collapse-123">
                <a href="./5.5.6.html"> 5.5.6  Lexical Addressing</a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-124">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-124" aria-expanded="false" aria-controls="sidebar-collapse-124">
                <a href="./5.5.7.html"> 5.5.7  Interfacing Compiled Code to the Evaluator</a>
              </span>
            </h5>
          </div>
        </div>
        
                </div>
              </div>
            </div>
        
                </div>
              </div>
            </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-125">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-125" aria-expanded="false" aria-controls="sidebar-collapse-125">
                <a href="./references.html">  References</a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-126">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-126" aria-expanded="false" aria-controls="sidebar-collapse-126">
                <a href="./making-of.html">  Making of the JavaScript Adaptation</a>
              </span>
            </h5>
          </div>
        </div>
        </div>
<div id='permalink-msg'>
<div class='screen'>
  <div class='alert alert-success'>
    <strong>Permalink copied!</strong>
  </div>
</div>
</div>
<div class='chapter-content'>

      <div class='chapter-title'>
        <div class='permalink'>
        <a name='top' class='permalink'> 
    3.3.5  Propagation of Constraints
        </a>
        </div>
      </div>
      <div class='chapter-text'>
        <div class='SECTION'><SECTION>
    

  
  
  


  <div class='permalink'>
<a name='p1' class='permalink'></a><p>
    Computer programs are traditionally organized as
    one-directional computations, which perform operations on prespecified
    arguments to produce desired outputs.  On the other hand, we often
    model systems in terms of relations among quantities.  For example, a
    mathematical model of a mechanical structure might include the
    information that the deflection $d$ of a metal
    rod is related to the force $F$ on the rod, the
    length $L$ of the rod, the cross-sectional
    area $A$, and the elastic modulus
    $E$ via the equation
    
      \[ d A E = F L \]
    
    Such an equation is not one-directional.  Given any four of the
    quantities, we can use it to compute the fifth.  Yet translating the
    equation into a traditional computer language would force us to choose
    one of the quantities to be computed in terms of the other four.
    Thus, a
    
      <span style="color:teal">procedure</span>
      <span style="color:blue">function</span>
    
    for computing the area $A$ could not be used to
    compute the deflection $d$, even though the
    computations of $A$ and
    $d$ arise from the same
    equation.<a class='superscript' id='footnote-link-1' href='#footnote-1'>[1]</a>
  </p></div>

  <div class='permalink'>
<a name='p2' class='permalink'></a><p>
    
    In this section, we sketch the design of a language that enables us to work
    in terms of relations themselves.  The primitive elements of the language
    are 
    
    
    <EM>primitive constraints</EM>, which state that certain relations hold
    between quantities.  For example,
    
      <span style="color:teal"><kbd>(adder a b c)</kbd></span>
      <span style="color:blue"><kbd>adder(a, b, c)</kbd>
      </span>
    
    specifies that the quantities $a$,
    $b$, and $c$ must be
    related by the equation $a+b=c$,
    
      <span style="color:teal"><kbd>(multiplier x y z)</kbd></span>
      <span style="color:blue"><kbd>multiplier(x, y, z)</kbd>
      </span>
    
    expresses the constraint $xy = z$, and
    
      <span style="color:teal"><kbd>(constant 3.14 x)</kbd></span>
      <span style="color:blue"><kbd>constant(3.14, x)</kbd>
      </span>
    
    says that the value of $x$ must be 3.14.
  </p></div>

  <div class='permalink'>
<a name='p3' class='permalink'></a><p>
    Our language provides a means of combining primitive constraints in order to
    express more complex relations.  We combine constraints by constructing 
    
    <EM>constraint networks</EM>, in which constraints are joined by 
    
    <EM>connectors</EM>.  A connector is an object that <QUOTE>holds</QUOTE> a
    value that may participate in one or more constraints.  For example, we know
    that the relationship between Fahrenheit and Celsius temperatures is
    
      \[ 9C = 5(F - 32) \]
    
  </p></div>

  <div class='permalink'>
<a name='p4' class='permalink'></a><p>
    Such a constraint can be thought of as a network consisting of primitive
    adder, multiplier, and constant constraints
    (figure <REF NAME="fig:constraint"><a class="superscript" id="3.3.5-fig-link-3.51" href="./3.3.5.html#fig_3.51">3.51</a></REF>).  In the figure, we see on the
    left a multiplier box with three terminals, labeled
    $m1$, $m2$, and
    $p$. These connect the multiplier to the rest of
    the network as follows:
    The $m1$ terminal is linked to a connector
    $C$, which will hold the Celsius temperature.
    The $m2$ terminal is linked to a connector
    $w$, which is also linked to a constant box that
    holds 9.  The $p$ terminal, which the multiplier
    box constrains to be the product of $m1$ and
    $m2$, is linked to the
    $p$ terminal of another multiplier box, whose
    $m2$ is connected to a constant 5 and whose
    $m1$ is connected to one of the terms in a sum.
    
    <FIGURE>
      <img class="scale_factor_" id="fig_3.51" src="../img_original/ch3-Z-G-30.svg">
      <div class="chapter-text-CAPTION">
      <b><a class="caption" href="./3.3.5.html#fig_3.51">Figure 3.51 </a></b>The relation $9C = 5(F - 32)$
      expressed as a constraint network.
      </div>
    </FIGURE>
  
  </p></div>

  <div class='permalink'>
<a name='p5' class='permalink'></a><p>
    Computation by such a network proceeds as follows: When a connector is
    given a value (by the user or by a constraint box to which it is
    linked), it awakens all of its associated constraints (except for the
    constraint that just awakened it) to inform them that it has a value.
    Each awakened constraint box then polls its connectors to see if there
    is enough information to determine a value for a connector.  If so,
    the box sets that connector, which then awakens all of its associated
    constraints, and so on.  For instance, in conversion between
    Celsius and Fahrenheit, $w$,
    $x$, and $y$ are
    immediately set by the constant boxes to 9, 5, and 32, respectively.  The
    connectors awaken the multipliers and the adder, which determine that there
    is not enough information to proceed.  If the user (or some other part of
    the network) sets $C$ to a value (say 25), the
    leftmost multiplier will be awakened, and it will set
    $u$ to $25\cdot 9=225$.
    Then $u$ awakens the second multiplier, which sets
    $v$ to 45, and $v$
    awakens the adder, which sets $F$ to 77.
  </p></div>

  
      <div class='permalink'>
        <a name='h1' class='permalink'></a><h2>
     
    Using the constraint system
  </h2></div>

  <div class='permalink'>
<a name='p6' class='permalink'></a><p>
    To use the constraint system to carry out the temperature computation
    outlined above, we first create two connectors,
    <kbd>C</kbd> and <kbd>F</kbd>, by
    calling the constructor
    
      <span style="color:teal"><kbd>make-connector</kbd>,</span>
      <span style="color:blue"><kbd>make_connector</kbd>,
      </span>
    
    and link <kbd>C</kbd> and <kbd>F</kbd>
    in an appropriate network:
    <table width="100%">
          <colgroup><col width="48%"><col width="52%"></colgroup>
          
          <tr>
            <td><div class='snippet' id='javascript_64_1_div'><div class='pre-prettyprint'><pre class='prettyprint no-eval'>
(define C (make-connector))
(define F (make-connector))
(celsius-fahrenheit-converter C F)</pre><pre class='prettyprintoutput'>
            ok</pre></div></div>    </td>
            <td><div class='snippet' id='javascript_64_1_div'><div class='pre-prettyprint'><pre class='prettyprint eval' title='Evaluate Javascript program'onclick="window.open('http://source-academy.github.io/playground#chap=3&prgrm=PTAEGUEkGEAVQFLlAZgHToKwChsDMBXAOwGMAXASwHsjQ8qAnAfQFMBDEgC1YA8SWADmQAULPoMo0ANHWIyANhQDOZAJSgA3tlA7ZpSbXlUqA4RTIsAtkvVbd90BTygzSpkQLz5Zi9dW3tByCGFjICBloAIgATGhZIgG5AoIBfUBZ5JRZHZ2FOdmifKxtQAF5y9PEhaiIAoODQ8MNjUzI2Cm9zYv8k+tA0jKzNZL69PIKiv1Ve0Z0QsIjQIxNhNo7Jm2mR+xSR3ft5pqWW4UUVLd38YnIaxyJ6BksmNgAjKgIyJgA3NnkCFmEJBoKgY7SIamGB0aiyBRBBYJEkUgAFpOGwvixkWxkT8-vELrhCPpbhR7ownq93p8iFRvr9-oDgWRQaSIXZdIcYUyWeDhEjkUYVMjLABPHH0-FJS5Em40UBoty4hmwogsciMOoc6G0FVqsiMPkKul4yIEq7EuUAc1CxuVNFV6oYmrm2tAusdfKVkuw0uuBlAWU+XsZRAd+oYMlVAHdbSwZKSHpY2ODnaBObQQ2GDZFA7HTaphNHY-GyY9k2opYS-bcHtagxLM3rGDJ5qDHan0y53eG+bXQvnhK2OOGzTL-d3G47IywY7D4ayO67Jz3It2B0W58yEaPq3KkwBrFhMbsG1PyUKgL1lOi-LIzHTnsh3RPl694W8se9LC+bnlkJTXh4XhfmOty5qKsaFjOuIyIGFhOpC9ROC4ACERrBpYLD+IhsxXqUoDRriX59Am5KvvhcEsAwxH1J2DysBw3BiPwQjCJREbbLMXGjKRjzPG8HzFpx3EifYv4IjYNE6AMmTZMhwhXihFSEb8qZ9FRDDZtANBbtEFCylEoAANTCVxkR8sZAbMqSlpOCKCkSuoRmgJEMiRJZpmiToII2XZUFRriTkuaoppSf06SyThoydpEFCWjSITRIkpn7LoqU6KBcp9p8EHBkO7ZRfY8n5eGZQVLxSYpoVSGlpVT74e+slhVCCy0PR7BcLwLEiCVzaeV5XEVfxVLuLSXpSP1A2jOJrKSSlEVDOyswxXFCUsElYXpf0IyZTq9p6v5x46X+am6PJyjuJ43iYZYLxUYdsJbqyE1TQNM3gpsp1BO9-7XgI7QMA9x0IjIP1zX0MmLSlpnyehDaYdhS08bVw2CcGG7Awum0LdkSM7LgfQxbEqrJfj9i7aAmGDiwACO-znNVOjFbT9P1RUkRwyaX0OJ2FWvkpDUftjgxybkIR0ywKhlfhkReqajM866XrC5FzMS1L5Qy7mcvcy1RzgSKsYq0Maus9LLnZfLeO0a62VMLlErG6LLji2bmsuWuutaq1br7eQTsK-YGkGq7ktkG5ACqRD7jSUa0CYVFsP6pK+6GTYMKF0Nk97RyYZW5oGZTniUAIij3ZYACMMiWAATDIAiadEBDkKmFMN1Q-BKG4RbBtz8l5GwirwxX6gAGSj6AdaQZX6juwADKonkAD5Ly4nMMrXY8T1PGE17PFQL173k2sG7dN+QMhz9XWEB7Dg-TyPoDj-K9+74jk0BifDZn834egB-swd7D3UAAKknl-PEwhN4yGwAASFgUEBGt9cjrwBD-FuT8J6oKgSPI+n96yQNrjA169ggGQPQRCMAZCN4j2ISQnQSD5oixyGvV+39G6-y3i-IehC954O1sPGBCCRLULQRwjBVCIEbz3hNYR3FGEQxxgrLaW026aU7m4O2vcFZaPYVQc+f8FH1F0YQqulMb6mRMdI6+Ww+jtw0e4GckFbFpR2ruWgVNQ4M2tkzMWLMw7m35GiDEWJxRc0Droexktu5ON7sgl2-iNbsxRIKMgwoxQ6wiToKJXcmBWIBC41ISifEOGDoDLxf9IhRxjlQOOaZElPhTpYYuFBS4UCopnCGewRgTkrjYr8vS67mMKanMMwgKH9JGJ2POPoqwWloGwaI0R7psDMWwIZSgCCWFbu40AOSYkxm0SUu+PCGSrK4dg9Z79uICMgZsywMhRHCHOZZJ5VzJmKOYScyCLzn7YPudcrityzlDKeQC0AyJwEELObQ4Z8SB6nIBFczB3DIIAv4VIpFZiwVbPUJCt5Mi4VMMiiUlRbj5l7PUdEvJjAnnc3yWxLZHzjG0sxc8sxRiggMvWcyoI+zHGHIbCM1RuzPENL7n49WbMZYomCZibEmSSn2H5T3IV8KKmBJSVQIUoown-Cth-flDKRk7GKR-Mp1MpWR2jrHWgGqU6LOWRnE1rjs46AnKs3loyDo8qJWJP2Ih7leumZ+WZBdxxMnLA5PEoMA0aiihTMVUruYWoqdampdT7V7ThG0cEnTXW6AnCeCMfrdDAoBMWmQ41S0uh9jM30FL+CZAoAQTRbBOAhCIPkcwR0iAYgYPBQEMg8Cpk3KAAg14DxHmLcIEZY6viTrYIeXtWZAZzqZKAKMi7l0zvXTm0APBt3TrjWugZG6RRHpXenWdX5mnyBLmXQGJAZBRhkAQEZd6H3tMBl8GQPA30jMdfdX9oARTDr3SoKNABOF9EHc0iEwH+uDUaUBDJFCMmKVB9zJUuGO6Al7d1JDHQAMQIyem92Am1KBbW2jtLAu0sB7bCftg7oAyGI9MIAA')">const C = make_connector();
const F = make_connector();
celsius_fahrenheit_converter(C, F);
</pre><pre class='prettyprintoutput'>
"ok"</pre></div></div></td></tr></table>
  </p></div>

  <div class='permalink'>
<a name='p7' class='permalink'></a><p>
    The
    
      <span style="color:teal">procedure</span>
      <span style="color:blue">function</span>
    
    that creates the network is defined as follows:
            
    <table width="100%">
          <colgroup><col width="48%"><col width="52%"></colgroup>
          
          <tr>
            <td><div class='snippet' id='javascript_64_2_div'><div class='pre-prettyprint'><pre class='prettyprint no-eval'>
(define (celsius-fahrenheit-converter c f)
  (let ((u (make-connector))
        (v (make-connector))
        (w (make-connector))
        (x (make-connector))
        (y (make-connector)))
    (multiplier c w u)
    (multiplier v x u)
    (adder v y f)
    (constant 9 w)
    (constant 5 x)
    (constant 32 y)
    'ok))</pre></div></div>    </td>
            <td><div class='snippet' id='javascript_64_2_div'><div class='pre-prettyprint'><pre class='prettyprint eval' title='Evaluate Javascript program'onclick="window.open('http://source-academy.github.io/playground#chap=3&prgrm=PTAEGUEkGEAVQFLlAZgHToKwChsDMBXAOwGMAXASwHsjQ8qAnAfQFMBDEgC1YA8SWADmQAULPoMo0ANHWIyANhQDOZAJSgA3tlA7ZpSbXlUqA4RTIsAtkvVbd90BTygzSpkQLz5Zi9dW3tByCGFjICBloAIgATGhZIgG5AoIBfUBZ5JRZHZ2FOdmifKxtQAF5y9PEhaiIAoODQ8MNjUzI2Cm9zYv8k+tA0jKzNZL69PIKiv1Ve0Z0QsIjQIxNhNo7Jm2mR+xSR3ft5pqWW4UUVLd38YnIaxyJ6BksmNgAjKgIyJgA3NnkCFmEJBoKgY7SIamGB0aiyBRBBYJEkUgAFpOGwvixkWxkT8-vELrhCPpbhR7ownq93p8iFRvr9-oDgWRQaSIXZdIcYUyWeDhEjkUYVMjLABPHH0-FJS5Em40UBoty4hmwogsciMOoc6G0FVqsiMPkKul4yIEq7EuUAc1CxuVNFV6oYmrm2tAusdfKVkuw0uuBlAWU+XsZRAd+oYMlVAHdbSwZKSHpY2ODnaBObQQ2GDZFA7HTaphNHY-GyY9k2opYS-bcHtagxLM3rGDJ5qDHan0y53eG+bXQvnhK2OOGzTL-d3G47IywY7D4ayO67Jz3It2B0W58yEaPq3KkwBrFhMbsG1PyUKgL1lOi-LIzHTnsh3RPl694W8se9LC+bnlkJTXh4XhfmOty5qKsaFjOuIyIGFhOpC9ROC4ACERrBpYLD+IhsxXqUoDRriX59Am5KvvhcEsAwxH1J2DysBw3BiPwQjCJREbbLMXGjKRjzPG8HzFpx3EifYv4IjYNE6AMmTZMhwhXihFSEb8qZ9FRDDZtANBbtEFCylEoAANTCVxkR8sZAbMqSlpOCKCkSuoRmgJEMiRJZpmiToII2XZUFRriTkuaoppSf06SyThoydpEFCWjSITRIkpn7LoqU6KBcp9p8EHBkO7ZRfY8n5eGZQVLxSYpoVSGlpVT74e+slhVCCy0PR7BcLwLEiCVzaeV5XEVfxVLuLSXpSP1A2jOJrKSSlEVDOyswxXFCUsElYXpf0IyZTq9p6v5x46X+am6PJyjuJ43iYZYLxUYdsJbqyE1TQNM3gpsp1BO9-7XgI7QMA9x0IjIP1zX0MmLSlpnyehDaYdhS08bVw2CcGG7Awum0LdkSM7LgfQxbEqrJfj9i7aAmGDiwACO-znNVOjFbT9P1RUkRwyaX0OJ2FWvkpDUftjgxybkIR0ywKhlfhkReqajM866XrC5FzMS1L5Qy7mcvcy1RzgSKsYq0Maus9LLnZfLeO0a62VMLlErG6LLji2bmsuWuutaq1br7eQTsK-YGkGq7ktkG5ACqRD7jSUa0CYVFsP6pK+6GTYMKF0Nk97RyYZW5oGZTniUAIij3ZYACMMiWAATDIAiadEBDkKmFMN1Q-BKG4RbBtz8l5GwirwxX6gAGSj6AdaQZX6juwADKonkAD5Ly4nMMrXY8T1PGE17PFQL173k2sG7dN+QMhz9XWEB7Dg-TyPoDj-K9+74jk0BifDZn834egB-swd7D3UAAKknl-PEwhN4yGwAASFgUEBGt9cjrwBD-FuT8J6oKgSPI+n96yQNrjA169ggGQPQRCMAZCN4j2ISQnQSD5oixyGvV+39G6-y3i-IehC954O1sPGBCCRLULQRwjBVCIEbz3hNYR3FGEQxxgrLaW026aU7m4O2vcFZaPYVQc+f8FH1F0YQqulMb6mRMdI6+Ww+jtw0e4GckFbFpR2ruWgVNQ4M2tkzMWLMw7m35GiDEWJxRc0Droexktu5ON7sgl2-iNbsxRIKMgwoxQ6wiToKJXcmBWIBC41ISifEOGDoDLxf9IhRxjlQOOaZElPhTpYYuFBS4UCopnCGewRgTkrjYr8vS67mMKanMMwgKH9JGJ2POPoqwWloGwaI0R7psDMWwIZSgCCWFbu40AOSYkxm0SUu+PCGSrK4dg9Z79uICMgZsywMhRHCHOZZJ5VzJmKOYScyCLzn7YPudcrityzlDKeQC0AyJwEELObQ4Z8SB6nIBFczB3DIIAv4VIpFZiwVbPUJCt5Mi4VMMiiUlRbj5l7PUdEvJjAnnc3yWxLZHzjG0sxc8sxRiggMvWcyoI+zHGHIbCM1RuzPENL7n49WbMZYomCZibEmSSn2H5T3IV8KKmBJSVQIUoown-Cth-flDKRk7GKR-Mp1MpWR2jrHWgGqU6LOWRnE1rjs46AnKs3loyDo8qJWJP2Ih7leumZ+WZBdxxMnLA5PEoMA0aiihTMVUruYWoqdampdT7V7ThG0cEnTXW6AnCeCMfrdDAoBMWmQ41S0uh9jM30FL+CZAoAQTRbBOAhCIPkcwR0iAYgYPBQEMg8Cpk3KAAg14DxHmLcIEZY6viTrYIeXtWZAZzqZKAKMi7l0zvXTm0APBt3TrjWugZG6RRHpXenWdX5mnyBLmXQGJAZBRhkAQEZd6H3tMBl8GQPA30jMdfdX9oARTDr3SoKNABOF9EHc0iEwH+uDUaUBDJFCMmKVB9zJUuGO6Al7d1JDHQAMQIyem92Am1KBbW2jtLAu0sB7bCftg7oAyGI9MIAA')">function celsius_fahrenheit_converter(c, f) {
    const u = make_connector();
    const v = make_connector();
    const w = make_connector();
    const x = make_connector();
    const y = make_connector();
    multiplier(c, w, u);
    multiplier(v, x, u);
    adder(v, y, f);
    constant(9, w);
    constant(5, x);
    constant(32, y);
    return "ok";
}
</pre></div></div></td></tr></table>
  </p></div>

  <div class='permalink'>
<a name='p8' class='permalink'></a><p>
    This
    
      <span style="color:teal">procedure</span>
      <span style="color:blue">function</span>
    
    creates the internal connectors <kbd>u</kbd>,
    <kbd>v</kbd>, <kbd>w</kbd>,
    <kbd>x</kbd>, and <kbd>y</kbd>, and
    links them as shown in figure <REF NAME="fig:constraint"><a class="superscript" id="3.3.5-fig-link-3.51" href="./3.3.5.html#fig_3.51">3.51</a></REF> using the
    primitive constraint constructors <kbd>adder</kbd>,
    <kbd>multiplier</kbd>, and
    <kbd>constant</kbd>.  Just as with the digital-circuit
    simulator of section <REF NAME="sec:circuit-simulator"><a class="superscript" id="3.3.5-sec-link-3.3.4" href="./3.3.4.html">3.3.4</a></REF>, expressing
    these combinations of primitive elements in terms of
    
      <span style="color:teal">procedures</span>
      <span style="color:blue">functions</span>
    
    automatically provides our language with a means of abstraction for compound
    objects.
  </p></div>

  <div class='permalink'>
<a name='p9' class='permalink'></a><p>
    To watch the network in action, we can place probes on the connectors
    <kbd>C</kbd> and <kbd>F</kbd>, using a
    <kbd>probe</kbd>
    
      <span style="color:teal">procedure</span>
      <span style="color:blue">function</span>
    
    similar to the one we used to monitor wires in
    section <REF NAME="sec:circuit-simulator"><a class="superscript" id="3.3.5-sec-link-3.3.4" href="./3.3.4.html">3.3.4</a></REF>. Placing a probe on a
    connector will cause a message to be printed whenever the connector is
    given a value:
    <table width="100%">
          <colgroup><col width="48%"><col width="52%"></colgroup>
          
          <tr>
            <td><div class='snippet' id='javascript_64_3_div'><div class='pre-prettyprint'><pre class='prettyprint no-eval'>
(probe "Celsius temp" C)
(probe "Fahrenheit temp" F)</pre></div></div>    </td>
            <td><div class='snippet' id='javascript_64_3_div'><div class='pre-prettyprint'><pre class='prettyprint eval' title='Evaluate Javascript program'onclick="window.open('http://source-academy.github.io/playground#chap=3&prgrm=PTAEGUEkGEAVQFLlAZgHToKwChsDMBXAOwGMAXASwHsjQALAQwGcB9ANwYBsCBTAChI0iPclQBOASlABvbKHmgxPMgTG1BRYaLF8ARI1YduPXRIDc2AL65CpSjVABzZey68BQkWXFTZCxcqq6p7aeka8phbW+MTk1LRMLuH8GlreYgA0oMIA7q7GWRREeOIAtgxEZL5yCkoqaqAeml7ieolk+RESEny5nTyFxWUVVVE2sfa0JWLOHclNaeJZdWIM2tX+dUGNqS06utOzpj0ra+nmVuN28aC75At7WX0aTGSrRVUyNfJbDQ+hujuZGOvR4eRebwYHwu0VscQcAAcxFQAEb8IgMUoDW4hc5ffxwyagJEfFhI1H8ZIbfwKAAmFCYCM4DAAnnpYMi0QAuUC6UAAamymJ4At5oAAvGLBa8xEVHBQ8GyqRd-NYCRMbuSSDwmKw+vNqTTibLKmTOfxZv1-ucVQo1QpCZrkdrdSxDkk3PxDTSSabyWi9AB+SLfUD2+SOhxYvhKACOvFe3s2gQacYTZAl4slukgAFpGGweLmGLnkrpQ0aaYHjVQXXqwVaJBXKwoeWmdRms9m85wqK9c6UWaXPeWW2Pq1qdax3XNPXwm2OWzyeGJkTp268Ms3F2PdABVIgAayIVBytA3GaKNbRIdVoaB1qWoCxtp+KdoWLGMWuDmmLB4ax0P+AAe2oImQfA8KBPDgfEWS2FknAMp8fgOhqDi9lQCJ8BQZA8KUTBJgoCqNAyLBEAQnCcDheEEd0+I7r8tC6LSNAmBYLaWKAPCcIkoAkXwdAAbSNH4YRmaSlBYGTERRpMaAmHYWQULUbhYndBxlZcTxfGoYutiCcJol0a+Y7yYpfDKRQqm0YRpl3g5tTvgpVBYXwSGJl+ka0EU0ylCwDAolQBCzsYTQylClTevJELvJUeh5gWRYlmWMJXPCPlDGI-mBcFHQnlasWRShoYxTQEUfAlua9v2g7DsYIawuhH4MIePAsECrTepwyigMkEqgHgXCJJp8g9ZeWXlJUA1DbxPCjQpvVFR8TADRRVELd5oDtCwg5WrkRhZO0eGSAxRoCQAhAYVovrJNL9ZKB1cAtLa+cM02SsdK4vZW8l-gBJBAVJMEQV9mTbjukM0m92UBUFIX9FuUPIy2y2VIRP3yNpc38XgjT9RdWbZGCRh3f4K5rno0A0JC9IZVKEOLroeiijKcoKkqnpSIKuhZHygqMyjbNEPKiqgjkpOiqYt5adxON6WZzm6BQjgnkotK6JjYahuGg3NYN4iWnt8ynOsZ3Q3jMbKKs2gSfxk0jGTxEOx9g3DfNgtvvUUziP+gEgdJVuQtoSMo2Hzt+XDeXkVQiOe+HlZo2QGMQ9junx-Jyuq+IPAa1ruu61tD7PDTcUla9ltket1FYqUaI6CXlRl6HCdQ0ndlO-I7cDQiUINw2GiQh8WTt-Zdpy+nnEQwJ13zLd5uvZNUcI-MjdD1F+cTyKCt3hDmescIms66GW3Rhed0CRedv6Mw-SmAvv3OTDU0ZoTkqzSNqdb7jjRX12vKpQfnJZyyRN46RFJfHg8YOzXx2oAnej9vbbRcMbT0YCcaQOga8a+M574IOAUgmcu0WT9HQXxTB6Zr5AjwRnZyQIyHb3jhTVoF4+YHmPKeWgWEVwMCJFeTqYgZZGgLqVZyn5LjfnpqUSilAmQUBXHwUoABGLIpQABMWRyS0gIOQb0W1Jyun1HOC+ltBK3znkoqQAAyKxTgPRhWUVIf+AAGBcLYAA+7jGizznOo6xtjLRzzUU4omrjO7INCu4LROiyBZGcaongY8sbfxnuY3xljQA2PoGkhxwTwlwLnNE8gWR46LkCekqQAAqOxkT+B+JKQASAaUaF8DCf5mMMIU5E2jdGZNsT4hxlj8n2PcOokprcFDlLCkUz4YApmjMseMiZz5EltNSZ06Z3SYn+OyRs0ZeSgE0gKYMxpyN5n8BmVIOZIy6nBK3M0qGrSv7gMOSI9UP5aAGOnIbG585DlEPmDMhJSSDYzF+co4FWsAW+I0SskFXzyINgNAtQu+sz5QPTCY3+GKYH-xzPmBghZiz1S6Ic-wCKjFhRBWnCBls-5E3xTVMgA4hzwPjgi6FVK2n4JpMw9cOLNy8nYSeM8AQsETWfDIigciVxCJpG8hQD4IVwoWkq2FTz-APiBSq0RSDxFNQ+aABgtJaQKIYCoo1sKmAEFKHo-WFKkXGMOesq05qdkDPcAwA5PL-DHPcNa0oWRzl8DdaKYNXqJCQueRgy2Hr+ChqyXGvgAb6I+oUH6+NsLg0ptALmGprrFk6s4ik2NOTPXBL6bsq0Kbhm1JDRa7NNqpB5vDXcotssXk8oVRGe1zopxuh+XWu6nL-U2qjS2Ed8aLUasrJOkN6rVkQwdXkZFx93lSP4OfZ1dKBWdgZYlQlyUSUmHCcuxsayd3iuvj2PszK6psshhywd57o2Tx3Hyq24q2FHhFeeXd9sjUmtldStdircT1vHWB5o9wvWQa7uBgNcGAh6o9ga+mEIRh8GSCPXEPhzan03buu6H7WFCp-ZwsVlD+HlWUpUOVusHwCKQxmx8mQ+qeiQ-JfV6UiTal4hQAg04GB0CUEQISuEOo0ELGIE6Ah4LeghKAAgA1yhtUk9B9I85VU0b6ip1q7UBFafvDpnIem1OGdMop4CZmDO4Z0JZnTLIbPqcWPZha0jOCyKQgokgWQchZAIKZDzXn5E6DYFkYCAXTLGtNWFrILJ5PaaIK8TDABOPzDnku0YgpgCLmWUvxRQLClkplM5UEPEfaIinoDOYsxYRTAAxWrdmjN8aYAJoTImeBiZ4BJjQ0nZPQCyA1i42B-T8F0NAHSHXQC0QRLzUA0ALjjb0A14TonxMZjmwtkbZggA')">probe("Celsius temp", C);
probe("Fahrenheit temp", F);
</pre></div></div></td></tr></table>
  </p></div>

  <div class='permalink'>
<a name='p10' class='permalink'></a><p>
    Next we set the value of <kbd>C</kbd> to 25.  (The third
    argument to
    
      <span style="color:teal"><kbd>set-value!</kbd></span>
      <span style="color:blue"><kbd>set_value</kbd></span>
    
    tells <kbd>C</kbd> that this directive comes from the
    <kbd>user</kbd>.)
    <table width="100%">
          <colgroup><col width="48%"><col width="52%"></colgroup>
          
          <tr>
            <td><div class='snippet' id='javascript_64_4_div'><div class='pre-prettyprint'><pre class='prettyprint no-eval'>
(set-value! C 25 'user)</pre><pre class='prettyprintoutput'>
Probe: Celsius temp = 25
Probe: Fahrenheit temp = 77
done</pre></div></div>    </td>
            <td><div class='snippet' id='javascript_64_4_div'><div class='pre-prettyprint'><pre class='prettyprint eval' title='Evaluate Javascript program'onclick="window.open('http://source-academy.github.io/playground#chap=3&prgrm=PTAEGUEkGEAVQFLlAZgHToKwChsDMBXAOwGMAXASwHsjQALAQwGcB9ANwYBsCBTAChI0iPclQBOASlABvbKHmgxPMgTG1BRYaLF8ARI1YduPXRIDc2AL65CpSjVABzZey68BQkWXFTZCxcqq6p7aeka8phbW+MTk1LRMLuH8GlreYgA0oMIA7q7GWRREeOIAtgxEZL5yCkoqaqAeml7ieolk+RESEny5nTyFxWUVVVE2sfa0JWLOHclNaeJZdWIM2tX+dUGNqS06utOzpj0ra+nmVuN28aC75At7WX0aTGSrRVUyNfJbDQ+hujuZGOvR4eRebwYHwu0VscQcAAcxFQAEb8IgMUoDW4hc5ffxwyagJEfFhI1H8ZIbfwKAAmFCYCM4DAAnnpYMi0QAuUC6UAAamymJ4At5oAAvGLBa8xEVHBQ8GyqRd-NYCRMbuSSDwmKw+vNqTTibLKmTOfxZv1-ucVQo1QpCZrkdrdSxDkk3PxDTSSabyWi9AB+SLfUD2+SOhxYvhKACOvFe3s2gQacYTZAl4slukgAFpGGweLmGLnkrpQ0aaYHjVQXXqwVaJBXKwoeWmdRms9m85wqK9c6UWaXPeWW2Pq1qdax3XNPXwm2OWzyeGJkTp268Ms3F2PdABVIgAayIVBytA3GaKNbRIdVoaB1qWoCxtp+KdoWLGMWuDmmLB4ax0P+AAe2oImQfA8KBPDgfEWS2FknAMp8fgOhqDi9lQCJ8BQZA8KUTBJgoCqNAyLBEAQnCcDheEEd0+I7r8tC6LSNAmBYLaWKAPCcIkoAkXwdAAbSNH4YRmaSlBYGTERRpMaAmHYWQULUbhYndBxlZcTxfGoYutiCcJol0a+Y7yYpfDKRQqm0YRpl3g5tTvgpVBYXwSGJl+ka0EU0ylCwDAolQBCzsYTQylClTevJELvJUeh5gWRYlmWMJXPCPlDGI-mBcFHQnlasWRShoYxTQEUfAlua9v2g7DsYIawuhH4MIePAsECrTepwyigMkEqgHgXCJJp8g9ZeWXlJUA1DbxPCjQpvVFR8TADRRVELd5oDtCwg5WrkRhZO0eGSAxRoCQAhAYVovrJNL9ZKB1cAtLa+cM02SsdK4vZW8l-gBJBAVJMEQV9mTbjukM0m92UBUFIX9FuUPIy2y2VIRP3yNpc38XgjT9RdWbZGCRh3f4K5rno0A0JC9IZVKEOLroeiijKcoKkqnpSIKuhZHygqMyjbNEPKiqgjkpOiqYt5adxON6WZzm6BQjgnkotK6JjYahuGg3NYN4iWnt8ynOsZ3Q3jMbKKs2gSfxk0jGTxEOx9g3DfNgtvvUUziP+gEgdJVuQtoSMo2Hzt+XDeXkVQiOe+HlZo2QGMQ9junx-Jyuq+IPAa1ruu61tD7PDTcUla9ltket1FYqUaI6CXlRl6HCdQ0ndlO-I7cDQiUINw2GiQh8WTt-Zdpy+nnEQwJ13zLd5uvZNUcI-MjdD1F+cTyKCt3hDmescIms66GW3Rhed0CRedv6Mw-SmAvv3OTDU0ZoTkqzSNqdb7jjRX12vKpQfnJZyyRN46RFJfHg8YOzXx2oAnej9vbbRcMbT0YCcaQOga8a+M574IOAUgmcu0WT9HQXxTB6Zr5AjwRnZyQIyHb3jhTVoF4+YHmPKeWgWEVwMCJFeTqYgZZGgLqVZyn5LjfnpqUSilAmQUBXHwUoABGLIpQABMWRyS0gIOQb0W1Jyun1HOC+ltBK3znkoqQAAyKxTgPRhWUVIf+AAGBcLYAA+7jGizznOo6xtjLRzzUU4omrjO7INCu4LROiyBZGcaongY8sbfxnuY3xljQA2PoGkhxwTwlwLnNE8gWR46LkCekqQAAqOxkT+B+JKQASAaUaF8DCf5mMMIU5E2jdGZNsT4hxlj8n2PcOokprcFDlLCkUz4YApmjMseMiZz5EltNSZ06Z3SYn+OyRs0ZeSgE0gKYMxpyN5n8BmVIOZIy6nBK3M0qGrSv7gMOSI9UP5aAGOnIbG585DlEPmDMhJSSDYzF+co4FWsAW+I0SskFXzyINgNAtQu+sz5QPTCY3+GKYH-xzPmBghZiz1S6Ic-wCKjFhRBWnCBls-5E3xTVMgA4hzwPjgi6FVK2n4JpMw9cOLNy8nYSeM8AQsETWfDIigciVxCJpG8hQD4IVwoWkq2FTz-APiBSq0RSDxFNQ+aABgtJaQKIYCoo1sKmAEFKHo-WFKkXGMOesq05qdkDPcAwA5PL-DHPcNa0oWRzl8DdaKYNXqJCQueRgy2Hr+ChqyXGvgAb6I+oUH6+NsLg0ptALmGprrFk6s4ik2NOTPXBL6bsq0Kbhm1JDRa7NNqpB5vDXcotssXk8oVRGe1zopxuh+XWu6nL-U2qjS2Ed8aLUasrJOkN6rVkQwdXkZFx93lSP4OfZ1dKBWdgZYlQlyUSUmHCcuxsayd3iuvj2PszK6psshhywd57o2Tx3Hyq24q2FHhFeeXd9sjUmtldStdircT1vHWB5o9wvWQa7uBgNcGAh6o9ga+mEIRh8GSCPXEPhzan03buu6H7WFCp-ZwsVlD+HlWUpUOVusHwCKQxmx8mQ+qeiQ-JfV6UiTal4hQAg04GB0CUEQISuEOo0ELGIE6Ah4LeghKAAgA1yhtUk9B9I85VU0b6ip1q7UBFafvDpnIem1OGdMop4CZmDO4Z0JZnTLIbPqcWPZha0jOCyKQgokgWQchZAIKZDzXn5E6DYFkYCAXTLGtNWFrILJ5PaaIK8TDABOPzDnku0YgpgCLmWUvxRQLClkplM5UEPEfaIinoDOYsxYRTAAxWrdmjN8aYAJoTImeBiZ4BJjQ0nZPQCyA1i42B-T8F0NAHSHXQC0QRLzUA0ALjjb0A14TonxMZjmwtkbFhsAsaG6ANRuXeSCeA2YIAA')">set_value(C, 25, "user");
</pre><pre class='prettyprintoutput'>
"Probe: Celsius temp = 25"
"Probe: Fahrenheit temp = 77"
"done"</pre></div></div></td></tr></table>
  </p></div>

  <div class='permalink'>
<a name='p11' class='permalink'></a><p>
    The probe on <kbd>C</kbd> awakens and reports the value.
    <kbd>C</kbd> also
    propagates its value through the network as described above.  This
    sets <kbd>F</kbd> to 77, which is reported by the probe
    on <kbd>F</kbd>.
  </p></div>

  <div class='permalink'>
<a name='p12' class='permalink'></a><p>
    Now we can try to set <kbd>F</kbd> to a new value, say 212:
    <table width="100%">
          <colgroup><col width="48%"><col width="52%"></colgroup>
          
          <tr>
            <td><div class='snippet' id='javascript_64_5_div'><div class='pre-prettyprint'><pre class='prettyprint no-eval'>
(set-value! F 212 'user)</pre><pre class='prettyprintoutput'>
Error! Contradiction (77 212)</pre></div></div>    </td>
            <td><div class='snippet' id='javascript_64_5_div'><div class='pre-prettyprint'><pre class='prettyprint eval' title='Evaluate Javascript program'onclick="window.open('http://source-academy.github.io/playground#chap=3&prgrm=PTAEGUEkGEAVQFLlAZgHToKwChsDMBXAOwGMAXASwHsjQALAQwGcB9ANwYBsCBTAChI0iPclQBOASlABvbKHmgxPMgTG1BRYaLF8ARI1YduPXRIDc2AL65CpSjVABzZey68BQkWXFTZCxcqq6p7aeka8phbW+MTk1LRMLuH8GlreYgA0oMIA7q7GWRREeOIAtgxEZL5yCkoqaqAeml7ieolk+RESEny5nTyFxWUVVVE2sfa0JWLOHclNaeJZdWIM2tX+dUGNqS06utOzpj0ra+nmVuN28aC75At7WX0aTGSrRVUyNfJbDQ+hujuZGOvR4eRebwYHwu0VscQcAAcxFQAEb8IgMUoDW4hc5ffxwyagJEfFhI1H8ZIbfwKAAmFCYCM4DAAnnpYMi0QAuUC6UAAamymJ4At5oAAvGLBa8xEVHBQ8GyqRd-NYCRMbuSSDwmKw+vNqTTibLKmTOfxZv1-ucVQo1QpCZrkdrdSxDkk3PxDTSSabyWi9AB+SLfUD2+SOhxYvhKACOvFe3s2gQacYTZAl4slukgAFpGGweLmGLnkrpQ0aaYHjVQXXqwVaJBXKwoeWmdRms9m85wqK9c6UWaXPeWW2Pq1qdax3XNPXwm2OWzyeGJkTp268Ms3F2PdABVIgAayIVBytA3GaKNbRIdVoaB1qWoCxtp+KdoWLGMWuDmmLB4ax0P+AAe2oImQfA8KBPDgfEWS2FknAMp8fgOhqDi9lQCJ8BQZA8KUTBJgoCqNAyLBEAQnCcDheEEd0+I7r8tC6LSNAmBYLaWKAPCcIkoAkXwdAAbSNH4YRmaSlBYGTERRpMaAmHYWQULUbhYndBxlZcTxfGoYutiCcJol0a+Y7yYpfDKRQqm0YRpl3g5tTvgpVBYXwSGJl+ka0EU0ylCwDAolQBCzsYTQylClTevJELvJUeh5gWRYlmWMJXPCPlDGI-mBcFHQnlasWRShoYxTQEUfAlua9v2g7DsYIawuhH4MIePAsECrTepwyigMkEqgHgXCJJp8g9ZeWXlJUA1DbxPCjQpvVFR8TADRRVELd5oDtCwg5WrkRhZO0eGSAxRoCQAhAYVovrJNL9ZKB1cAtLa+cM02SsdK4vZW8l-gBJBAVJMEQV9mTbjukM0m92UBUFIX9FuUPIy2y2VIRP3yNpc38XgjT9RdWbZGCRh3f4K5rno0A0JC9IZVKEOLroeiijKcoKkqnpSIKuhZHygqMyjbNEPKiqgjkpOiqYt5adxON6WZzm6BQjgnkotK6JjYahuGg3NYN4iWnt8ynOsZ3Q3jMbKKs2gSfxk0jGTxEOx9g3DfNgtvvUUziP+gEgdJVuQtoSMo2Hzt+XDeXkVQiOe+HlZo2QGMQ9junx-Jyuq+IPAa1ruu61tD7PDTcUla9ltket1FYqUaI6CXlRl6HCdQ0ndlO-I7cDQiUINw2GiQh8WTt-Zdpy+nnEQwJ13zLd5uvZNUcI-MjdD1F+cTyKCt3hDmescIms66GW3Rhed0CRedv6Mw-SmAvv3OTDU0ZoTkqzSNqdb7jjRX12vKpQfnJZyyRN46RFJfHg8YOzXx2oAnej9vbbRcMbT0YCcaQOga8a+M574IOAUgmcu0WT9HQXxTB6Zr5AjwRnZyQIyHb3jhTVoF4+YHmPKeWgWEVwMCJFeTqYgZZGgLqVZyn5LjfnpqUSilAmQUBXHwUoABGLIpQABMWRyS0gIOQb0W1Jyun1HOC+ltBK3znkoqQAAyKxTgPRhWUVIf+AAGBcLYAA+7jGizznOo6xtjLRzzUU4omrjO7INCu4LROiyBZGcaongY8sbfxnuY3xljQA2PoGkhxwTwlwLnNE8gWR46LkCekqQAAqOxkT+B+JKQASAaUaF8DCf5mMMIU5E2jdGZNsT4hxlj8n2PcOokprcFDlLCkUz4YApmjMseMiZz5EltNSZ06Z3SYn+OyRs0ZeSgE0gKYMxpyN5n8BmVIOZIy6nBK3M0qGrSv7gMOSI9UP5aAGOnIbG585DlEPmDMhJSSDYzF+co4FWsAW+I0SskFXzyINgNAtQu+sz5QPTCY3+GKYH-xzPmBghZiz1S6Ic-wCKjFhRBWnCBls-5E3xTVMgA4hzwPjgi6FVK2n4JpMw9cOLNy8nYSeM8AQsETWfDIigciVxCJpG8hQD4IVwoWkq2FTz-APiBSq0RSDxFNQ+aABgtJaQKIYCoo1sKmAEFKHo-WFKkXGMOesq05qdkDPcAwA5PL-DHPcNa0oWRzl8DdaKYNXqJCQueRgy2Hr+ChqyXGvgAb6I+oUH6+NsLg0ptALmGprrFk6s4ik2NOTPXBL6bsq0Kbhm1JDRa7NNqpB5vDXcotssXk8oVRGe1zopxuh+XWu6nL-U2qjS2Ed8aLUasrJOkN6rVkQwdXkZFx93lSP4OfZ1dKBWdgZYlQlyUSUmHCcuxsayd3iuvj2PszK6psshhywd57o2Tx3Hyq24q2FHhFeeXd9sjUmtldStdircT1vHWB5o9wvWQa7uBgNcGAh6o9ga+mEIRh8GSCPXEPhzan03buu6H7WFCp-ZwsVlD+HlWUpUOVusHwCKQxmx8mQ+qeiQ-JfV6UiTal4hQAg04GB0CUEQISuEOo0ELGIE6Ah4LeghKAAgA1yhtUk9B9I85VU0b6ip1q7UBFafvDpnIem1OGdMop4CZmDO4Z0JZnTLIbPqcWPZha0jOCyKQgokgWQchZAIKZDzXn5E6DYFkYCAXTLGtNWFrILJ5PaaIK8TDABOPzDnku0YgpgCLmWUvxRQLClkplM5UEPEfaIinoDOYsxYRTAAxWrdmjN8aYAJoTImeBiZ4BJjQ0nZPQCyA1i42B-T8F0NAHSHXQC0QRLzUA0ALjjb0A14TonxMZjmwtkbFhsAsaG6ANRuXeSCeA3tljDWshqKUbC3QZ3BHmCAA')">set_value(F, 212, "user");
</pre><pre class='prettyprintoutput'>
"Error! Contradiction: (77, 212)"</pre></div></div></td></tr></table>
  </p></div>

  <div class='permalink'>
<a name='p13' class='permalink'></a><p>
    The connector complains that it has sensed a contradiction: Its value
    is 77, and someone is trying to set it to 212.  If we really want to
    reuse the network with new values, we can tell
    <kbd>C</kbd> to forget its old value:
    <table width="100%">
          <colgroup><col width="48%"><col width="52%"></colgroup>
          
          <tr>
            <td><div class='snippet' id='javascript_64_6_div'><div class='pre-prettyprint'><pre class='prettyprint no-eval'>
(forget-value! C 'user)</pre><pre class='prettyprintoutput'>
Probe: Celsius temp = ?
Probe: Fahrenheit temp = ?
done</pre></div></div>    </td>
            <td><div class='snippet' id='javascript_64_6_div'><div class='pre-prettyprint'><pre class='prettyprint eval' title='Evaluate Javascript program'onclick="window.open('http://source-academy.github.io/playground#chap=3&prgrm=PTAEGUEkGEAVQFLlAZgHToKwChsDMBXAOwGMAXASwHsjQALAQwGcB9ANwYBsCBTAChI0iPclQBOASlABvbKHmgxPMgTG1BRYaLF8ARI1YduPXRIDc2AL65CpSjVABzZey68BQkWXFTZCxcqq6p7aeka8phbW+MTk1LRMLuH8GlreYgA0oMIA7q7GWRREeOIAtgxEZL5yCkoqaqAeml7ieolk+RESEny5nTyFxWUVVVE2sfa0JWLOHclNaeJZdWIM2tX+dUGNqS06utOzpj0ra+nmVuN28aC75At7WX0aTGSrRVUyNfJbDQ+hujuZGOvR4eRebwYHwu0VscQcAAcxFQAEb8IgMUoDW4hc5ffxwyagJEfFhI1H8ZIbfwKAAmFCYCM4DAAnnpYMi0QAuUC6UAAamymJ4At5oAAvGLBa8xEVHBQ8GyqRd-NYCRMbuSSDwmKw+vNqTTibLKmTOfxZv1-ucVQo1QpCZrkdrdSxDkk3PxDTSSabyWi9AB+SLfUD2+SOhxYvhKACOvFe3s2gQacYTZAl4slukgAFpGGweLmGLnkrpQ0aaYHjVQXXqwVaJBXKwoeWmdRms9m85wqK9c6UWaXPeWW2Pq1qdax3XNPXwm2OWzyeGJkTp268Ms3F2PdABVIgAayIVBytA3GaKNbRIdVoaB1qWoCxtp+KdoWLGMWuDmmLB4ax0P+AAe2oImQfA8KBPDgfEWS2FknAMp8fgOhqDi9lQCJ8BQZA8KUTBJgoCqNAyLBEAQnCcDheEEd0+I7r8tC6LSNAmBYLaWKAPCcIkoAkXwdAAbSNH4YRmaSlBYGTERRpMaAmHYWQULUbhYndBxlZcTxfGoYutiCcJol0a+Y7yYpfDKRQqm0YRpl3g5tTvgpVBYXwSGJl+ka0EU0ylCwDAolQBCzsYTQylClTevJELvJUeh5gWRYlmWMJXPCPlDGI-mBcFHQnlasWRShoYxTQEUfAlua9v2g7DsYIawuhH4MIePAsECrTepwyigMkEqgHgXCJJp8g9ZeWXlJUA1DbxPCjQpvVFR8TADRRVELd5oDtCwg5WrkRhZO0eGSAxRoCQAhAYVovrJNL9ZKB1cAtLa+cM02SsdK4vZW8l-gBJBAVJMEQV9mTbjukM0m92UBUFIX9FuUPIy2y2VIRP3yNpc38XgjT9RdWbZGCRh3f4K5rno0A0JC9IZVKEOLroeiijKcoKkqnpSIKuhZHygqMyjbNEPKiqgjkpOiqYt5adxON6WZzm6BQjgnkotK6JjYahuGg3NYN4iWnt8ynOsZ3Q3jMbKKs2gSfxk0jGTxEOx9g3DfNgtvvUUziP+gEgdJVuQtoSMo2Hzt+XDeXkVQiOe+HlZo2QGMQ9junx-Jyuq+IPAa1ruu61tD7PDTcUla9ltket1FYqUaI6CXlRl6HCdQ0ndlO-I7cDQiUINw2GiQh8WTt-Zdpy+nnEQwJ13zLd5uvZNUcI-MjdD1F+cTyKCt3hDmescIms66GW3Rhed0CRedv6Mw-SmAvv3OTDU0ZoTkqzSNqdb7jjRX12vKpQfnJZyyRN46RFJfHg8YOzXx2oAnej9vbbRcMbT0YCcaQOga8a+M574IOAUgmcu0WT9HQXxTB6Zr5AjwRnZyQIyHb3jhTVoF4+YHmPKeWgWEVwMCJFeTqYgZZGgLqVZyn5LjfnpqUSilAmQUBXHwUoABGLIpQABMWRyS0gIOQb0W1Jyun1HOC+ltBK3znkoqQAAyKxTgPRhWUVIf+AAGBcLYAA+7jGizznOo6xtjLRzzUU4omrjO7INCu4LROiyBZGcaongY8sbfxnuY3xljQA2PoGkhxwTwlwLnNE8gWR46LkCekqQAAqOxkT+B+JKQASAaUaF8DCf5mMMIU5E2jdGZNsT4hxlj8n2PcOokprcFDlLCkUz4YApmjMseMiZz5EltNSZ06Z3SYn+OyRs0ZeSgE0gKYMxpyN5n8BmVIOZIy6nBK3M0qGrSv7gMOSI9UP5aAGOnIbG585DlEPmDMhJSSDYzF+co4FWsAW+I0SskFXzyINgNAtQu+sz5QPTCY3+GKYH-xzPmBghZiz1S6Ic-wCKjFhRBWnCBls-5E3xTVMgA4hzwPjgi6FVK2n4JpMw9cOLNy8nYSeM8AQsETWfDIigciVxCJpG8hQD4IVwoWkq2FTz-APiBSq0RSDxFNQ+aABgtJaQKIYCoo1sKmAEFKHo-WFKkXGMOesq05qdkDPcAwA5PL-DHPcNa0oWRzl8DdaKYNXqJCQueRgy2Hr+ChqyXGvgAb6I+oUH6+NsLg0ptALmGprrFk6s4ik2NOTPXBL6bsq0Kbhm1JDRa7NNqpB5vDXcotssXk8oVRGe1zopxuh+XWu6nL-U2qjS2Ed8aLUasrJOkN6rVkQwdXkZFx93lSP4OfZ1dKBWdgZYlQlyUSUmHCcuxsayd3iuvj2PszK6psshhywd57o2Tx3Hyq24q2FHhFeeXd9sjUmtldStdircT1vHWB5o9wvWQa7uBgNcGAh6o9ga+mEIRh8GSCPXEPhzan03buu6H7WFCp-ZwsVlD+HlWUpUOVusHwCKQxmx8mQ+qeiQ-JfV6UiTal4hQAg04GB0CUEQISuEOo0ELGIE6Ah4LeghKAAgA1yhtUk9B9I85VU0b6ip1q7UBFafvDpnIem1OGdMop4CZmDO4Z0JZnTLIbPqcWPZha0jOCyKQgokgWQchZAIKZDzXn5E6DYFkYCAXTLGtNWFrILJ5PaaIK8TDABOPzDnku0YgpgCLmWUvxRQLClkplM5UEPEfaIinoDOYsxYRTAAxWrdmjN8aYAJoTImeBiZ4BJjQ0nZPQCyA1i42B-T8F0NAHSHXQC0QRLzUA0ALjjb0A14TonxMZjmwtkbFhsAsaG6ANRuXeSCeA3tudh3dBncEeYIAA')">forget_value(C, "user");
</pre><pre class='prettyprintoutput'>
"Probe: Celsius temp = ?"
"Probe: Fahrenheit temp = ?"
"done"</pre></div></div></td></tr></table>
  </p></div>

  <div class='permalink'>
<a name='p14' class='permalink'></a><p>
    <kbd>C</kbd> finds that the
    
      <span style="color:teal">
	<kbd>user</kbd>,
      </span>
      <span style="color:blue">
	<kbd>"user"</kbd>,
      </span>
    
    who set its value originally, is now retracting that value, so
    <kbd>C</kbd> agrees to lose its value, as shown by the
    probe, and informs the rest of the network of this fact. This information
    eventually propagates to <kbd>F</kbd>, which now finds
    that it has no reason for continuing to believe that its own
    value is 77.  Thus, <kbd>F</kbd> also
    gives up its value, as shown by the probe.
  </p></div>

  <div class='permalink'>
<a name='p15' class='permalink'></a><p>
    Now that <kbd>F</kbd> has no value, we are free to set it
    to 212:
    <table width="100%">
          <colgroup><col width="48%"><col width="52%"></colgroup>
          
          <tr>
            <td><div class='snippet' id='javascript_64_7_div'><div class='pre-prettyprint'><pre class='prettyprint no-eval'>
(set-value! F 212 'user)</pre><pre class='prettyprintoutput'>
Probe: Fahrenheit temp = 212
Probe: Celsius temp = 100
done</pre></div></div>    </td>
            <td><div class='snippet' id='javascript_64_7_div'><div class='pre-prettyprint'><pre class='prettyprint eval' title='Evaluate Javascript program'onclick="window.open('http://source-academy.github.io/playground#chap=3&prgrm=PTAEGUEkGEAVQFLlAZgHToKwChsDMBXAOwGMAXASwHsjQALAQwGcB9ANwYBsCBTAChI0iPclQBOASlABvbKHmgxPMgTG1BRYaLF8ARI1YduPXRIDc2AL65CpSjVABzZey68BQkWXFTZCxcqq6p7aeka8phbW+MTk1LRMLuH8GlreYgA0oMIA7q7GWRREeOIAtgxEZL5yCkoqaqAeml7ieolk+RESEny5nTyFxWUVVVE2sfa0JWLOHclNaeJZdWIM2tX+dUGNqS06utOzpj0ra+nmVuN28aC75At7WX0aTGSrRVUyNfJbDQ+hujuZGOvR4eRebwYHwu0VscQcAAcxFQAEb8IgMUoDW4hc5ffxwyagJEfFhI1H8ZIbfwKAAmFCYCM4DAAnnpYMi0QAuUC6UAAamymJ4At5oAAvGLBa8xEVHBQ8GyqRd-NYCRMbuSSDwmKw+vNqTTibLKmTOfxZv1-ucVQo1QpCZrkdrdSxDkk3PxDTSSabyWi9AB+SLfUD2+SOhxYvhKACOvFe3s2gQacYTZAl4slukgAFpGGweLmGLnkrpQ0aaYHjVQXXqwVaJBXKwoeWmdRms9m85wqK9c6UWaXPeWW2Pq1qdax3XNPXwm2OWzyeGJkTp268Ms3F2PdABVIgAayIVBytA3GaKNbRIdVoaB1qWoCxtp+KdoWLGMWuDmmLB4ax0P+AAe2oImQfA8KBPDgfEWS2FknAMp8fgOhqDi9lQCJ8BQZA8KUTBJgoCqNAyLBEAQnCcDheEEd0+I7r8tC6LSNAmBYLaWKAPCcIkoAkXwdAAbSNH4YRmaSlBYGTERRpMaAmHYWQULUbhYndBxlZcTxfGoYutiCcJol0a+Y7yYpfDKRQqm0YRpl3g5tTvgpVBYXwSGJl+ka0EU0ylCwDAolQBCzsYTQylClTevJELvJUeh5gWRYlmWMJXPCPlDGI-mBcFHQnlasWRShoYxTQEUfAlua9v2g7DsYIawuhH4MIePAsECrTepwyigMkEqgHgXCJJp8g9ZeWXlJUA1DbxPCjQpvVFR8TADRRVELd5oDtCwg5WrkRhZO0eGSAxRoCQAhAYVovrJNL9ZKB1cAtLa+cM02SsdK4vZW8l-gBJBAVJMEQV9mTbjukM0m92UBUFIX9FuUPIy2y2VIRP3yNpc38XgjT9RdWbZGCRh3f4K5rno0A0JC9IZVKEOLroeiijKcoKkqnpSIKuhZHygqMyjbNEPKiqgjkpOiqYt5adxON6WZzm6BQjgnkotK6JjYahuGg3NYN4iWnt8ynOsZ3Q3jMbKKs2gSfxk0jGTxEOx9g3DfNgtvvUUziP+gEgdJVuQtoSMo2Hzt+XDeXkVQiOe+HlZo2QGMQ9junx-Jyuq+IPAa1ruu61tD7PDTcUla9ltket1FYqUaI6CXlRl6HCdQ0ndlO-I7cDQiUINw2GiQh8WTt-Zdpy+nnEQwJ13zLd5uvZNUcI-MjdD1F+cTyKCt3hDmescIms66GW3Rhed0CRedv6Mw-SmAvv3OTDU0ZoTkqzSNqdb7jjRX12vKpQfnJZyyRN46RFJfHg8YOzXx2oAnej9vbbRcMbT0YCcaQOga8a+M574IOAUgmcu0WT9HQXxTB6Zr5AjwRnZyQIyHb3jhTVoF4+YHmPKeWgWEVwMCJFeTqYgZZGgLqVZyn5LjfnpqUSilAmQUBXHwUoABGLIpQABMWRyS0gIOQb0W1Jyun1HOC+ltBK3znkoqQAAyKxTgPRhWUVIf+AAGBcLYAA+7jGizznOo6xtjLRzzUU4omrjO7INCu4LROiyBZGcaongY8sbfxnuY3xljQA2PoGkhxwTwlwLnNE8gWR46LkCekqQAAqOxkT+B+JKQASAaUaF8DCf5mMMIU5E2jdGZNsT4hxlj8n2PcOokprcFDlLCkUz4YApmjMseMiZz5EltNSZ06Z3SYn+OyRs0ZeSgE0gKYMxpyN5n8BmVIOZIy6nBK3M0qGrSv7gMOSI9UP5aAGOnIbG585DlEPmDMhJSSDYzF+co4FWsAW+I0SskFXzyINgNAtQu+sz5QPTCY3+GKYH-xzPmBghZiz1S6Ic-wCKjFhRBWnCBls-5E3xTVMgA4hzwPjgi6FVK2n4JpMw9cOLNy8nYSeM8AQsETWfDIigciVxCJpG8hQD4IVwoWkq2FTz-APiBSq0RSDxFNQ+aABgtJaQKIYCoo1sKmAEFKHo-WFKkXGMOesq05qdkDPcAwA5PL-DHPcNa0oWRzl8DdaKYNXqJCQueRgy2Hr+ChqyXGvgAb6I+oUH6+NsLg0ptALmGprrFk6s4ik2NOTPXBL6bsq0Kbhm1JDRa7NNqpB5vDXcotssXk8oVRGe1zopxuh+XWu6nL-U2qjS2Ed8aLUasrJOkN6rVkQwdXkZFx93lSP4OfZ1dKBWdgZYlQlyUSUmHCcuxsayd3iuvj2PszK6psshhywd57o2Tx3Hyq24q2FHhFeeXd9sjUmtldStdircT1vHWB5o9wvWQa7uBgNcGAh6o9ga+mEIRh8GSCPXEPhzan03buu6H7WFCp-ZwsVlD+HlWUpUOVusHwCKQxmx8mQ+qeiQ-JfV6UiTal4hQAg04GB0CUEQISuEOo0ELGIE6Ah4LeghKAAgA1yhtUk9B9I85VU0b6ip1q7UBFafvDpnIem1OGdMop4CZmDO4Z0JZnTLIbPqcWPZha0jOCyKQgokgWQchZAIKZDzXn5E6DYFkYCAXTLGtNWFrILJ5PaaIK8TDABOPzDnku0YgpgCLmWUvxRQLClkplM5UEPEfaIinoDOYsxYRTAAxWrdmjN8aYAJoTImeBiZ4BJjQ0nZPQCyA1i42B-T8F0NAHSHXQC0QRLzUA0ALjjb0A14TonxMZjmwtkbFhsAsaG6ANRuXeSCeA3tudh3dBncEaNljDWshqKUbC67iRbtmCAA')">set_value(F, 212, "user");
</pre><pre class='prettyprintoutput'>
"Probe: Fahrenheit temp = 212"
"Probe: Celsius temp = 100"
"done"</pre></div></div></td></tr></table>
  </p></div>

  <div class='permalink'>
<a name='p16' class='permalink'></a><p>
    This new value, when propagated through the network, forces
    <kbd>C</kbd> to have a value of 100, and this is
    registered by the probe on <kbd>C</kbd>. Notice that the
    very same network is being used to compute <kbd>C</kbd>
    given <kbd>F</kbd> and to compute
    <kbd>F</kbd> given <kbd>C</kbd>.
    This nondirectionality of computation is the distinguishing feature of
    constraint-based systems.
  </p></div>

  
      <div class='permalink'>
        <a name='h2' class='permalink'></a><h2>
     
    Implementing the constraint system
  </h2></div>

  <div class='permalink'>
<a name='p17' class='permalink'></a><p>
    The constraint system is implemented via procedural objects with local
    state, in a manner very similar to the digital-circuit simulator of
    section <REF NAME="sec:circuit-simulator"><a class="superscript" id="3.3.5-sec-link-3.3.4" href="./3.3.4.html">3.3.4</a></REF>.  Although the primitive
    objects of the constraint system are somewhat more complex, the overall
    system is simpler, since there is no concern about agendas and logic delays.
  </p></div>

  <div class='permalink'>
<a name='p18' class='permalink'></a><p>
    
    The basic operations on connectors are the following:
    <UL>
      <LI>
        
        
	  <span style="color:teal"><kbd>(has-value? ^connector^)</kbd>:</span>
	  <span style="color:blue"><kbd>has_value(connector)</kbd>:
	  </span>
	
        tells whether the connector has a value.
      </LI>
      <LI>
        
        
	  <span style="color:teal"><kbd>(get-value ^connector^)</kbd>:</span>
	  <span style="color:blue"><kbd>get_value(connector)</kbd>:
	  </span>
	
        returns the connector's current value.
      </LI>
      <LI>
        
        
	  <span style="color:teal">
	    <kbd>(set-value! ^connector^ ^new-value^ ^informant^)</kbd>:
	  </span>
	  <span style="color:blue">
	    <kbd>set_value(connector, new_value, informant)</kbd>:
	  </span>
	
        indicates that the informant is requesting the connector to set its
        value to the new value.
      </LI>
      <LI>
        
        
	  <span style="color:teal">
	    <kbd>(forget-value! ^connector^ ^retractor^)</kbd>:
	  </span>
	  <span style="color:blue">
	    <kbd>forget_value(connector, retractor)</kbd>:
	  </span>
	
        tells the connector that the retractor is requesting it to forget its
	value.
      </LI>
      <LI>
        
        
	  <span style="color:teal">
	    <kbd>(connect ^connector^ ^new-constraint^)</kbd>:
	  </span>
	  <span style="color:blue">
	    <kbd>connect(connector, new_constraint)</kbd>:
	  </span>
	
        tells the connector to participate in the new constraint.
      </LI>
    </UL>
  </p></div>

  <div class='permalink'>
<a name='p19' class='permalink'></a><p>
    The connectors communicate with the constraints by means of the
    
      <span style="color:teal">procedures</span>
      <span style="color:blue">functions</span>
    
    
      <span style="color:teal"><kbd>inform-about-value</kbd>,
      </span>
      <span style="color:blue"><kbd>inform_about_value</kbd>,
      </span>
    
    which tells the given constraint that the connector has a value, and
    
      <span style="color:teal"><kbd>forget-value</kbd>,</span>
      <span style="color:blue"><kbd>forget_value</kbd>,
      </span>
    
    which tells the constraint that the connector has lost its value.
  </p></div>

  <div class='permalink'>
<a name='p20' class='permalink'></a><p>
    <kbd>Adder</kbd> constructs an adder constraint among
    summand connectors <kbd>a1</kbd> and
    <kbd>a2</kbd> and a <kbd>sum</kbd>
    connector.  An adder is implemented as a
    
      <span style="color:teal">procedure</span>
      <span style="color:blue">function</span>
    
    with local state (the
    
      <span style="color:teal">procedure</span>
      <span style="color:blue">function</span>
    
    <kbd>me</kbd> below):
            
    <table width="100%">
          <colgroup><col width="48%"><col width="52%"></colgroup>
          
          <tr>
            <td><div class='snippet' id='javascript_64_8_div'><div class='pre-prettyprint'><pre class='prettyprint no-eval'>
(define (adder a1 a2 sum)
  (define (process-new-value)
    (cond ((and (has-value? a1) (has-value? a2))
            (set-value! sum
                        (+ (get-value a1) (get-value a2))
                        me))
          ((and (has-value? a1) (has-value? sum))
           (set-value! a2
                       (- (get-value sum) (get-value a1))
                       me))
          ((and (has-value? a2) (has-value? sum))
           (set-value! a1
                       (- (get-value sum) (get-value a2))
                       me))))
  (define (process-forget-value)
    (forget-value! sum me)
    (forget-value! a1 me)
    (forget-value! a2 me)
    (process-new-value))
  (define (me request)
    (cond ((eq? request 'I-have-a-value)  
           (process-new-value))
          ((eq? request 'I-lost-my-value) 
            (process-forget-value))
          (else 
            (error "Unknown request - - ADDER" request))))
  (connect a1 me)
  (connect a2 me)
  (connect sum me)
  me)</pre></div></div>    </td>
            <td><div class='snippet' id='javascript_64_8_div'><div class='pre-prettyprint'><pre class='prettyprint eval' title='Evaluate Javascript program'onclick="window.open('http://source-academy.github.io/playground#chap=3&prgrm=PTAEGUEkGEAVQFLlAZgHToKwChsDMBXAOwGMAXASwHsjQALAQwGcB9ANwYBsCBTAChI0iPclQBOASlABvbKHmgxPMgTG1BRYaLF8ARI1YduPXRIDc2AL65CpSjVABzZey68BQkWXFTZCxcqq6p7aeka8phbW+MTk1LRMLuH8GlreYgA0oMIA7q7GWRREeOIAtgxEZL5yCkoqaqAeml7ieolk+RESEny5nTyFxWUVVVE2sfa0JWLOHclNaeJZdWIM2tX+dUGNqS06utOzpj0ra+nmVuN28aC75At7WX0aTGSrRVUyNfJbDQ+hujuZGOvR4eRebwYHwu0VscQcDAAJoieDoGABGLIMABMWSYBFKGwUcMmoAADmIqCQeExWH15kT-PIKHhGgZ+nwMVIAGTc+jMDk47pfJmi0DtDn40pZWaC9FSADUTiSbn4QqypR4FzFoEsoB4nESoBZbIF8y5oF5-MMqr4UuFfh1Cgl5txyrmtvtoAAtO65RINVqLDq9QajSa+OzXTy+VHPQSHd8nS7bRiZSrjHaEz6-dHA9qxaHDTwRYWk9Z-CSbhSqTTWIcM+5GUyGx7M1L88Gxa25Z2k5XxLLXX2dTXqbSWPTbQX5BXiRMbpq+EoAI68V7N-wR1frsigAC8h9Aukg3sYbB43oY3uSplLTvJlPHdLBHJnTKL4dZy54a5pe8Pfdj1PTgqFeb1SgATxvVU70dB8xzrFgewZLtRU-Et4KdVFKR0Hd-yyXQAFUiAAayIKgclofDXmNWgkRRMRIn7BQ51nJMgU5TFQE1d9OJxEcFE4jseKDJNfloTUoiAA')">function adder(a1, a2, sum) {
    function process_new_value() {
        if (has_value(a1) && has_value(a2)) {
            set_value(sum, get_value(a1) + get_value(a2), me);
        } else if (has_value(a1) && has_value(sum)) {
            set_value(a2, get_value(sum) - get_value(a1), me);
        } else if (has_value(a2) && has_value(sum)) {
            set_value(a1, get_value(sum) - get_value(a2), me);
        } else {
        }
    }
    function process_forget_value() {
        forget_value(sum, me);
        forget_value(a1, me);
        forget_value(a2, me);
        process_new_value();
    }
    function me(request) {
        if (request === "I-have-a-value") {
            process_new_value();
        } else if (request === "I-lost-my-value") {
            process_forget_value();
        } else {
            error(request, "Unknown request in adder");
        }
    }
    connect(a1, me);
    connect(a2, me);
    connect(sum, me);
    return me;
}
</pre></div></div></td></tr></table>
  </p></div>

  <div class='permalink'>
<a name='p21' class='permalink'></a><p>
    <kbd>Adder</kbd> connects the new adder to the designated
    connectors and returns it as its value.  The
    
      <span style="color:teal">procedure</span>
      <span style="color:blue">function</span>
    
    <kbd>me</kbd>, which represents the adder, acts as a
    dispatch to the local
    
      <span style="color:teal">procedures.</span>
      <span style="color:blue">functions.</span>
    
    The following
    <QUOTE>syntax interfaces</QUOTE> (see
    footnote <REF NAME="foot:object-syntax"><a class="superscript" id="3.3.5-foot-link-1" href="./3.3.4.html#footnote-1">1</a></REF> in
    section <REF NAME="sec:circuit-simulator"><a class="superscript" id="3.3.5-sec-link-3.3.4" href="./3.3.4.html">3.3.4</a></REF>) are used in conjunction
    with the dispatch:
            
            
    <table width="100%">
          <colgroup><col width="48%"><col width="52%"></colgroup>
          
          <tr>
            <td><div class='snippet' id='javascript_64_9_div'><div class='pre-prettyprint'><pre class='prettyprint no-eval'>
(define (inform-about-value constraint)
  (constraint 'I-have-a-value))

(define (inform-about-no-value constraint)
  (constraint 'I-lost-my-value))</pre></div></div>    </td>
            <td><div class='snippet' id='javascript_64_9_div'><div class='pre-prettyprint'><pre class='prettyprint eval' title='Evaluate Javascript program'onclick="window.open('http://source-academy.github.io/playground#chap=3&prgrm=PTAEGUEkGEAVQFLlAZgHToKwChsDMBXAOwGMAXASwHsjQKi8qAnAWwH0BDAIyoLLYBuHADYEApgAoSNAM5kmHemQCUoAN7ZQW0EzFkCTWtKJyFSiQCJIAWgAWHAWOsdrQ0WIvKA3NgC+uQlJKGjoGZnZuXn4iKkERcSlZeUUiFXVNbV19Q1BjUxSySxthKjlrFgBPV3iPbz8gA')">function inform_about_value(constraint) {
    return constraint("I-have-a-value");
}

function inform_about_no_value(constraint) {
    return constraint("I-lost-my-value");
}
</pre></div></div></td></tr></table>
  </p></div>

  <div class='permalink'>
<a name='p22' class='permalink'></a><p>
    The adder's local
    
      <span style="color:teal">procedure</span>
      <span style="color:blue">function</span>
    
    
      <span style="color:teal"><kbd>process-new-value</kbd></span>
      <span style="color:blue"><kbd>process_new_value</kbd>
      </span>
    
    is called when the adder is informed that one of its connectors has a value.
    The adder first checks to see if both <kbd>a1</kbd> and
    <kbd>a2</kbd> have values. If so, it tells
    <kbd>sum</kbd> to set its value to the sum of the two
    addends. The <kbd>informant</kbd> argument to
    
      <span style="color:teal"><kbd>set-value!</kbd></span>
      <span style="color:blue"><kbd>set_value</kbd></span>
    
    is <kbd>me</kbd>, which is the adder object itself.  If
    <kbd>a1</kbd> and <kbd>a2</kbd> do not
    both have values, then the adder checks to see if perhaps
    <kbd>a1</kbd> and <kbd>sum</kbd> have
    values.  If so, it sets <kbd>a2</kbd> to the difference of
    these two. Finally, if <kbd>a2</kbd> and
    <kbd>sum</kbd> have values, this gives the adder enough
    information to set <kbd>a1</kbd>.  If the adder is told
    that one of its connectors has lost a value, it requests that all of its
    connectors now lose their values.  (Only those values that were set by
    this adder are actually lost.)  Then it runs
    
      <span style="color:teal"><kbd>process-new-value</kbd>.</span>
      <span style="color:blue"><kbd>process_new_value</kbd>.
      </span>
    
    The reason for this last step is that one or more connectors may still
    have a value (that is, a connector may have had a value that was not
    originally set by the adder), and these values may need to be
    propagated back through the adder.
  </p></div>

  <div class='permalink'>
<a name='p23' class='permalink'></a><p>
    A multiplier is very similar to an adder. It will set its
    <kbd>product</kbd> to 0 if either of the factors is 0,
    even if the other factor is not known.
            
    <table width="100%">
          <colgroup><col width="48%"><col width="52%"></colgroup>
          
          <tr>
            <td><div class='snippet' id='javascript_64_10_div'><div class='pre-prettyprint'><pre class='prettyprint no-eval'>
(define (multiplier m1 m2 product)
  (define (process-new-value)
            (cond ((or (and (has-value? m1) (= (get-value m1) 0))
                       (and (has-value? m2) (= (get-value m2) 0)))
                   (set-value! product 0 me))
                  ((and (has-value? m1) (has-value? m2))
                   (set-value! product
                               (* (get-value m1) (get-value m2))
                               me))
                  ((and (has-value? product) (has-value? m1))
                   (set-value! m2
                               (/ (get-value product) (get-value m1))
                               me))
                  ((and (has-value? product) (has-value? m2))
                   (set-value! m1
                               (/ (get-value product) (get-value m2))
                               me))))
  (define (process-forget-value)
    (forget-value! product me)
    (forget-value! m1 me)
    (forget-value! m2 me)
    (process-new-value))
  (define (me request)
    (cond ((eq? request 'I-have-a-value)
           (process-new-value))
          ((eq? request 'I-lost-my-value)
           (process-forget-value))
          (else
            (error "Unknown request - - MULTIPLIER" request))))
  (connect m1 me)
  (connect m2 me)
  (connect product me)
  me)</pre></div></div>    </td>
            <td><div class='snippet' id='javascript_64_10_div'><div class='pre-prettyprint'><pre class='prettyprint eval' title='Evaluate Javascript program'onclick="window.open('http://source-academy.github.io/playground#chap=3&prgrm=PTAEGUEkGEAVQFLlAZgHToKwChsDMBXAOwGMAXASwHsjQALAQwGcB9ANwYBsCBTAChI0iPclQBOASlABvbKHmgxPMgTG1BRYaLF8ARI1YduPXRIDc2AL65CpSjVABzZey68BQkWXFTZCxcqq6p7aeka8phbW+MTk1LRMLuH8GlreYgA0oMIA7q7GWRREeOIAtgxEZL5yCkoqaqAeml7ieolk+RESEny5nTyFxWUVVVE2sfa0JWLOHclNaeJZdWIM2tX+dUGNqS06utOzpj0ra+nmVuN28aC75At7WX0aTGSrRVUyNfJbDQ+hujuZGOvR4eRebwYHwu0VscQcpQInEoAAdOBQeDpSgBGLKlABMWRRYioABMCOQNgo4ZNQMSqCQeExWH15lT-PIKHhGnwDP0+DipAAyIVOJJufiC0AAXlloAADBJvhzQAAfVWNPnzAnC0Wzfk6mVyxXslUKdr8+nk8hZeV4ngXM2gSygHicRKgLma5gG7G6+g+7X47pfJ3+C3zK0UshZZVhsP67V+0AAKjFcwlAuDsYAkDmVaUHRYnS63R6vbzA5mo5TQCKA4ZM4LTU6I03CaA4-GzYnqyTrZ8wL3jAK-bHu93C46zaX3TxPdzK42RzXPvWte2Q35u22RzjcxP5MP3KupEPxXvs9h84ep8WZ6656GZ8rrP4aTd6YzmSxDhf3C21LiMe-Crva04qn+GZ7rioB3l28hQQaHbwU6X5MiyYL8hBzrKh+CL8EoACOvCvIBnKLsRpFkEa0qgLokAALSMGwPCMQwjHJKYz7xuhP6spmOH+LO5aUTwJFMjRsp0QxjGcFQryMaUACenEStx268SS36sEhbL3iqInzppYaYiSOhUZJWS6AAqkQADWRBUDktCWa8nq0IiyIUGiGJiJECG4cJypAqO4EGbcIRkFm4UhVFfBgXBRbKr8nk8FEQA')">function multiplier(m1, m2, product) {
    function process_new_value() {
        if ((has_value(m1) && get_value(m1) === 0)
         || (has_value(m2) && get_value(m2) === 0)) {
            set_value(product, 0, me);
        } else if (has_value(m1) && has_value(m2)) {
            set_value(product, 
                      get_value(m1) * get_value(m2), 
		      me);
        } else if (has_value(product) && has_value(m1)) {
            set_value(m2, 
                      get_value(product) / get_value(m1), 
                      me);
        } else if (has_value(product) && has_value(m2)) {
            set_value(m1, 
	              get_value(product) / get_value(m2),
	              me);
        } else {
        }
    }
    function process_forget_value() {
        forget_value(product, me);
        forget_value(m1, me);
        forget_value(m2, me);
        process_new_value();
    }
    function me(request) {
        if (request === "I-have-a-value") {
            process_new_value();
        } else if (request === "I-lost-my-value") {
            process_forget_value();
        } else {
            error(request, "Unknown request in multiplier");
        }
    }
    connect(m1, me);
    connect(m2, me);
    connect(product, me);
    return me;
}
</pre></div></div></td></tr></table>
  </p></div>

  <div class='permalink'>
<a name='p24' class='permalink'></a><p>
    A <kbd>constant</kbd> constructor simply sets the value of
    the designated connector.  Any
    
      <span style="color:teal">
	<kbd>I-have-a-value</kbd>
      </span>
      <span style="color:blue">
	<kbd>"I-have-a-value"</kbd>
      </span>
    
    or
    
      <span style="color:teal">
	<kbd>I-lost-my-value</kbd>
      </span>
      <span style="color:blue">
	<kbd>"I-lost-my-value"</kbd>
      </span>
    
    message sent to the constant box will produce an error.
            
    <table width="100%">
          <colgroup><col width="48%"><col width="52%"></colgroup>
          
          <tr>
            <td><div class='snippet' id='javascript_64_11_div'><div class='pre-prettyprint'><pre class='prettyprint no-eval'>
(define (constant value connector)
  (define (me request)
    (error "Unknown request - - CONSTANT" request))
  (connect connector me)
  (set-value! connector value me)
  me)</pre></div></div>    </td>
            <td><div class='snippet' id='javascript_64_11_div'><div class='pre-prettyprint'><pre class='prettyprint eval' title='Evaluate Javascript program'onclick="window.open('http://source-academy.github.io/playground#chap=3&prgrm=PTAEGUEkGEAVQFLlAZgHToKwChsDMBXAOwGMAXASwHsjQALAQwGcB9ANwYBsCBTAChI0iPclQBOASlABvbKHmgxPMgTG1BRYaLF8ARI1YduPXRIDc2AL65CpSjVABzZey68BQkWXFTZCxcqq6p7aeka8phbW+MTk1LRMLuH8GlreYgA0oMIA7q7GWRREeOIAtgxEZL5yCkoqaqAeml7ieolk+RESEny5nTyFxWUVVVE2sfa0JWLOHclNaeJZdWIM2tX+dUGNqS06utOzpj0ra+nmVuN28aC75At7WX0aTGSrRVUyNfJbDQ+hujuZGOvR4eRebwYHwu0VscQcEJGfGSWSBPi+-jhk1ApX4SgAjrxXht-AoeGIxK0CUSyFldABVIgAayIVBytGpPFeoCKtxorxGkW+oGs-iB-3SWVxF387X6EqWoBROJ4MtqgQauKiQA')">function constant(value, connector) {
    function me(request) {
        error(request, "Unknown request in constant");
    }
    connect(connector, me);
    set_value(connector, value, me);
    return me;
}
</pre></div></div></td></tr></table>
  </p></div>

  <div class='permalink'>
<a name='p25' class='permalink'></a><p>
    Finally, a probe prints a message about the setting or unsetting of
    the designated connector:
    
            
    <table width="100%">
          <colgroup><col width="48%"><col width="52%"></colgroup>
          
          <tr>
            <td><div class='snippet' id='javascript_64_12_div'><div class='pre-prettyprint'><pre class='prettyprint no-eval'>
(define (probe name connector)
  (define (print-probe value)
    (newline)
    (display "Probe: ")
    (display name)
    (display " = ")
    (display value))
  (define (process-new-value)
    (print-probe (get-value connector)))
  (define (process-forget-value)
    (print-probe "?"))
  (define (me request)
    (cond ((eq? request 'I-have-a-value)
           (process-new-value))
          ((eq? request 'I-lost-my-value)
           (process-forget-value))
          (else
           (error "Unknown request - - PROBE" request))))
  (connect connector me)
  me)</pre></div></div>    </td>
            <td><div class='snippet' id='javascript_64_12_div'><div class='pre-prettyprint'><pre class='prettyprint eval' title='Evaluate Javascript program'onclick="window.open('http://source-academy.github.io/playground#chap=3&prgrm=PTAEGUEkGEAVQFLlAZgHToKwChsDMBXAOwGMAXASwHsjQALAQwGcB9ANwYBsCBTAChI0iPclQBOASlABvbKHmgxPMgTG1BRYaLF8ARI1YduPXRIDc2AL65CpSjVABzZey68BQkWXFTZCxcqq6p7aeka8phbW+MTk1LRMLuH8GlreYgA0oMIA7q7GWRREeOIAtgxEZL5yCkoqaqAeml7ieolk+RESEny5nTyFxWUVVVE2sfa0JWLOHclNaeJZdWIM2tX+dUGNqS06utOzpj0ra+nmVuN28aC75At7WX0aTGSrRVUyNfJbDQ+hujuZGOvR4eRebwYHwu0VscQcAAcxFQAEb8IgMUoDW4hc5ffxwyagJEfFhI1H8ZIbfwKAAmFCYCM4DAAnnpYMi0QAuUC6UAAamymJ4At5oAAvGLBa8xEVHBQ8GyqRd-NYCRMbuSSDwmKw+vNqTTibLKmTOfxZv1-ucVQo1QpCZrkdrdSxDkk3PxDTSSabyWi9AB+SLfUD2+SOhxYvhKACOvFe3s2gQacYTZAl4slukgAFpGGweLmGLnkrpQ0aaYHjVQXXqwVaJBXKwoeWmdRms9m85wqK9c6UWaXPeWW2Pq1qdax3XNPXwm2OWzyeGJkTp268Ms3F2PdABVIgAayIVBytA3GaKNbRIdVoaB1qWoCxtp+KdoWKiQA')">function probe(name, connector) {
    function print_probe(value) {
        display("Probe: " + name + " = " + stringify(value));
    }
    function process_new_value() {
        print_probe(get_value(connector));
    }
    function process_forget_value() {
        print_probe("?");
    }
    function me(request) {
        return request === "I-have-a-value"
               ? process_new_value()
               : request === "I-lost-my-value"
                 ? process_forget_value()
                 : error(request,
                         "Unknown request in probe");
    }
    connect(connector, me);
    return me;
}
</pre></div></div></td></tr></table>
  </p></div>

  
      <div class='permalink'>
        <a name='h3' class='permalink'></a><h2>
     
    Representing connectors
  </h2></div>

  

  <div class='permalink'>
<a name='p26' class='permalink'></a><p>
    A connector is represented as a procedural object with local state variables
    <kbd>value</kbd>, the current value of the connector;
    <kbd>informant</kbd>, the object that set the
    connector's value; and <kbd>constraints</kbd>,
    a list of the constraints in which the connector participates.
            
    <table width="100%">
          <colgroup><col width="48%"><col width="52%"></colgroup>
          
          <tr>
            <td><div class='snippet' id='javascript_64_13_div'><div class='pre-prettyprint'><pre class='prettyprint no-eval'>
(define (make-connector)
  (let ((value false) (informant false) (constraints '()))
    (define (set-my-value newval setter)
      (cond ((not (has-value? me))
             (set! value newval)
             (set! informant setter)
             (for-each-except setter
                              inform-about-value
                              constraints))
            ((not (= value newval))
             (error "Contradiction" (list value newval)))
            (else 'ignored)))
    (define (forget-my-value retractor)
      (if (eq? retractor informant)
          (begin (set! informant false)
            (for-each-except retractor
                             inform-about-no-value
                             constraints))
          'ignored))
    (define (connect new-constraint)
      (if (not (memq new-constraint constraints))
          (set! constraints 
                (cons new-constraint constraints)))
      (if (has-value? me)
          (inform-about-value new-constraint))
      'done)
    (define (me request)
      (cond ((eq? request 'has-value?)
             (if informant true false))
            ((eq? request 'value) value)
            ((eq? request 'set-value!) set-my-value)
            ((eq? request 'forget) forget-my-value)
            ((eq? request 'connect) connect)
            (else (error "Unknown operation - - CONNECTOR"
                         request))))
    me))</pre></div></div>    </td>
            <td><div class='snippet' id='javascript_64_13_div'><div class='pre-prettyprint'><pre class='prettyprint eval' title='Evaluate Javascript program'onclick="window.open('http://source-academy.github.io/playground#chap=3&prgrm=PTAEGUEkGEAVQFLlAZgHToKwChsDMBXAOwGMAXASwHsjQ8qAnAfQFMBDEgC1YA8SWADmQAULPoMo0ANHWIyANhQDOZAJSgA3tlA7ZpSbXlUqA4RTIsAtkvVbd90BTygzSpkQLz5Zi9dW3tByCGFjICBloAIgATGhZIgG5AoIBfUBZ5JRZHZ2FOdmifKxtQAF5y9PEhaiIAoODQ8MNjUzI2Cm9zYv8k+tA0jKzNZL69PIKiv1Ve0Z0QsIjQIxNhNo7Jm2mR+xSR3ft5pqWW4UUVLd38YnIaxyJ6BksmNgAjKgIyJgA3NnkCFmEJBoKgY7SIamGB0aiyBRBBYJEkUgAFpOGwvixkWxkT8-vELrhCPpbhR7ownq93p8iFRvr9-oDgWRQaSIXZdIcYUyWeDhEjkUYVMjLABPHH0-FJS5Em40UBoty4hmwogsciMOoc6G0FVqsiMPkKul4yIEq7EuUAc1CxuVNFV6oYmrm2tAusdfKVkuw0uuBlAWU+XsZRAd+oYMlVAHdbSwZKSHpY2ODnaBObQQ2GDZFA7HTaphNHY-GyY9k2opYS-bcHtagxLM3rGDJ5qDHan0y53eG+bXQvnhK2OOGzTL-d3G47IywY7D4ayO67Jz3It2B0W58yEaPq3KkwBrFhMbsG1PyUKgL1lOi-LIzHTnsh3RPl694W8se9LC+bnlkJTXh4XhfmOty5qKsaFjOuIyIGFhOpC9ROC4ACERrBpYLD+IhsxXqUoDRriX59Am5KvvhcEsAwxH1J2DysBw3BiPwQjCJREbbLMXGjKRjzPG8HzFpx3EifYv4IjYNE6AMmTZMhwhXihFSEb8qZ9FRDDZtANBbtEFCylEoAANTCVxkR8sZAbMqSlpOCKCkSuoRmgJEMiRJZpmiToII2XZUFRriTkuaoppSf06SyThoydpEFCWjSITRIkpn7LoqU6KBcp9p8EHBkO7ZRfY8n5eGZQVLxSYpoVSGlpVT74e+slhVCCy0PR7BcLwLEiCVzaeV5XEVfxVLuLSXpSP1A2jOJrKSSlEVDOyswxXFCUsElYXpf0IyZTq9p6v5x46X+am6PJyjuJ43iYZYLxUYdsJbqyE1TQNM3gpsp1BO9-7XgI7QMA9x0IjIP1zX0MmLSlpnyehDaYdhS08bVw2CcGG7Awum0LdkSM7LgfQxbEqrJfj9i7aAmGDiwACO-znNVOjFbT9P1RUkRwyaX0OJ2FWvkpDUftjgxybkIR0ywKhlfhkReqajM866XrC5FzMS1L5Qy7mcvcy1RzgSKsYq0Maus9LLnZfLeO0a62VMLlErG6LLji2bmsuWuutaq1br7eQTsK-YGkGq7ktkG5ACqRD7jSUa0CYVFsP6pK+6GTYMKF0Nk97RyYVKQA')">function make_connector() {
    let value = false;
    let informant = false;
    let constraints = null;
    function set_my_value(newval, setter) {
        if (!has_value(me)) {
            value = newval;
            informant = setter;
            return for_each_except(setter,
                                   inform_about_value,
                                   constraints);
        } else if (value !== newval) {
            error("Contradiction " +
                  "(" + stringify(value) + ", " + 
                        stringify(newval) + ")");
        } else {
            return "ignored";
        }
    }
    function forget_my_value(retractor) {
        if (retractor === informant) {
            informant = false;
            return for_each_except(retractor,
                                   inform_about_no_value,
                                   constraints);
        } else {
            return "ignored";
        }
    }
    function connect(new_contraint) {
        if (is_null(member(new_contraint,
                                 constraints))) {
            constraints = pair(new_contraint, constraints);
        } else {
        }
        if (has_value(me)) {
            inform_about_value(new_contraint);
        } else {
        }

        return "done";
    }
    function me(request) {
        if (request === "has_value") {
            return informant !== false;
        } else if (request === "value") {
            return value;
        } else if (request === "set_value") {
            return set_my_value;
        } else if (request === "forget") {
            return forget_my_value;
        } else if (request === "connect") {
            return connect;
        } else {
            error(request, "Unknown operation in connector");
        }
    }
    return me;
}
</pre></div></div></td></tr></table>
  </p></div>

  <div class='permalink'>
<a name='p27' class='permalink'></a><p>
    The connector's local
    
      <span style="color:teal">procedure</span>
      <span style="color:blue">function</span>
    
    
      <span style="color:teal"><kbd>set-my-value</kbd></span>
      <span style="color:blue"><kbd>set_my_value</kbd></span>
    
    is called when there is a request to set the connector's value.  If
    the connector does not currently have a value, it will set its value and
    remember as <kbd>informant</kbd> the constraint that
    requested the value to be set.<a class='superscript' id='footnote-link-2' href='#footnote-2'>[2]</a> Then the connector will
    notify all of its participating constraints except the constraint that
    requested the value to be set. This is accomplished using the following
    iterator, which applies a designated
    
      <span style="color:teal">procedure</span>
      <span style="color:blue">function</span>
    
    to all items in a list except a given one:
            
    <table width="100%">
          <colgroup><col width="48%"><col width="52%"></colgroup>
          
          <tr>
            <td><div class='snippet' id='javascript_64_14_div'><div class='pre-prettyprint'><pre class='prettyprint no-eval'>
(define (for-each-except exception procedure list)
  (define (loop items)
    (cond ((null? items) 'done)
          ((eq? (car items) exception) (loop (cdr items)))
          (else (procedure (car items))
                (loop (cdr items)))))
  (loop list))</pre></div></div>    </td>
            <td><div class='snippet' id='javascript_64_14_div'><div class='pre-prettyprint'><pre class='prettyprint eval' title='Evaluate Javascript program'onclick="window.open('http://source-academy.github.io/playground#chap=3&prgrm=PTAEGUEkGEAVQFLlAZgHToKwChsDMBXAOwGMAXASwHsjQ8qAnAfQFMBDEgC1YA8SWADmQAULPoMo0ANHWIyANhQDOZAJSgA3tlA7ZpSbXlUqA4RTIsAtkvVbd90BTygzSpkQLz5Zi9dW3tByCGFjICBloAIgATGhZIgG5AoIBfUBZ5JRZHZ2FOdmifKxtQAF5y9PEhaiIAoODQ8MNjUzI2Cm9zYv8k+tA0jKzNZL69PIKiv1Ve0Z0QsIjQIxNhNo7Jm2mR+xSR3ft5pqWW4UUVLZSgA')">function for_each_except(exception, fun, list) {
    function loop(items) {
        if (is_null(items)) {
            return "done";
        } else if (head(items) === exception) {
            return loop(tail(items));
        } else {
            fun(head(items));
            return loop(tail(items));
        }
    }
    return loop(list);
}
</pre></div></div></td></tr></table>
  </p></div>

  <div class='permalink'>
<a name='p28' class='permalink'></a><p>
    If a connector is asked to forget its value, it runs the local
    
      <span style="color:teal">procedure</span>
      <span style="color:blue">function</span>
    
    
      <span style="color:teal"><kbd>forget-my-value</kbd>,</span>
      <span style="color:blue"><kbd>forget_my_value</kbd>,
      </span>
    
    which first checks to make sure that the request is coming from the same
    object that set the value originally.  If so, the connector informs its
    associated constraints about the loss of the value.
  </p></div>

  <div class='permalink'>
<a name='p29' class='permalink'></a><p>
    The local
    
      <span style="color:teal">procedure</span>
      <span style="color:blue">function</span>
    
    <kbd>connect</kbd> adds the designated new constraint
    to the list of constraints if it is not already in that list.  Then,
    if the connector has a value, it informs the new constraint of this
    fact.
  </p></div>

  <div class='permalink'>
<a name='p30' class='permalink'></a><p>
    The connector's
    
      <span style="color:teal">procedure</span>
      <span style="color:blue">function</span>
    
    <kbd>me</kbd> serves as a dispatch to the other internal
    
      <span style="color:teal">procedures</span>
      <span style="color:blue">functions</span>
    
    and also represents the connector as an object. The following
    
      <span style="color:teal">procedures</span>
      <span style="color:blue">functions</span>
    
    provide a syntax interface for the dispatch:
            
            
            
            
            
    <table width="100%">
          <colgroup><col width="48%"><col width="52%"></colgroup>
          
          <tr>
            <td><div class='snippet' id='javascript_64_15_div'><div class='pre-prettyprint'><pre class='prettyprint no-eval'>
(define (has-value? connector)
  (connector 'has-value?))

(define (get-value connector)
  (connector 'value))

(define (set-value! connector new-value informant)
  ((connector 'set-value!) new-value informant))

(define (forget-value! connector retractor)
  ((connector 'forget) retractor))

(define (connect connector new-constraint)
  ((connector 'connect) new-constraint))</pre></div></div>    </td>
            <td><div class='snippet' id='javascript_64_15_div'><div class='pre-prettyprint'><pre class='prettyprint eval' title='Evaluate Javascript program'onclick="window.open('http://source-academy.github.io/playground#chap=3&prgrm=PTAEGUEkGEAVQFLlAZgHToKwChsDMBXAOwGMAXASwHsjQALAQwGcB9ANwYBsCBTAChI0iPclQBOASlABvbKHmgxPMgTG1BRYaLF8ARI1YduPXRIDc2AL65CpSjVABzZey68BQkWXFTZCxcqq6p7aeka8phbW+MTk1LRMLuH8GlreYgA0oMIA7q7GWRREeOIAtgxEZL5yCkoqaqAeml7ieolk+RESEny5nTyFxWUVVVE2sfa0JWLOHclNaeJZdWIM2tX+dUGNqS06utOzpj0ra+nmVuN28aC75At7WX0aTGSrRVUyNfJbDQ+hujuZGOvR4eRebwYHwuliAA')">function has_value(connector) {
    return connector("has_value");
}

function get_value(connector) {
    return connector("value");
}

function set_value(connector, new_value, informant) {
    return (connector("set_value"))(new_value, informant);
}

function forget_value(connector, retractor) {
    return (connector("forget"))(retractor);
}

function connect(connector, new_constraint) {
    return (connector("connect"))(new_constraint);
}
</pre></div></div></td></tr></table>
  </p></div>

  
    <div class="permalink">
    <a name="ex_3.33" class="permalink"></a><EXERCISE><b><a class="exercise-number permalink" id="ex_3.33">Exercise 3.33 </a></b> 
  
    Using primitive multiplier, adder, and constant constraints, define a
    
      <span style="color:teal">procedure</span>
      <span style="color:blue">function</span>
    
    
    <kbd>averager</kbd> that takes three connectors
    <kbd>a</kbd>, <kbd>b</kbd>,
    and <kbd>c</kbd> as inputs and establishes the
    constraint that the value of
    <kbd>c</kbd> is the average of the values of
    <kbd>a</kbd> and <kbd>b</kbd>.
  
      <div class="Solution">
      <div class="solution_btn"><button class="btn btn-secondary solution_btn" href="#no_solution_64_1_div" data-toggle="collapse">Add solution</button></div>
      <div class="solution_content collapse" id="no_solution_64_1_div">There is currently no solution available for this exercise. This textbook adaptation is a community effort. Do consider contributing by providing a solution for this exercise, using a Pull Request in <a address="https://github.com/source-academy/sicp" href="https://github.com/source-academy/sicp">Github</a>.</div>
      </div>
    
</EXERCISE></div>


  
    <div class="permalink">
    <a name="ex_3.34" class="permalink"></a><EXERCISE><b><a class="exercise-number permalink" id="ex_3.34">Exercise 3.34 </a></b> 
  
    
    Louis Reasoner wants to build a squarer, a constraint device with two
    terminals such that the value of connector
    <kbd>b</kbd> on the second
    terminal will always be the square of the value
    <kbd>a</kbd> on the first
    terminal.  He proposes the following simple device made from a
    multiplier:
    <table width="100%">
          <colgroup><col width="48%"><col width="52%"></colgroup>
          
          <tr>
            <td><div class='snippet' id='javascript_64_16_div'><div class='pre-prettyprint'><pre class='prettyprint no-eval'>
(define (squarer a b)
  (multiplier a a b))</pre></div></div>    </td>
            <td><div class='snippet' id='javascript_64_16_div'><div class='pre-prettyprint'><pre class='prettyprint no-eval'>
function squarer(a, b) {
    return multiplier(a, a, b);
}</pre></div></div></td></tr></table>
    There is a serious flaw in this idea.  Explain.
    
  
      <div class="Solution">
      <div class="solution_btn"><button class="btn btn-secondary solution_btn" href="#no_solution_64_2_div" data-toggle="collapse">Add solution</button></div>
      <div class="solution_content collapse" id="no_solution_64_2_div">There is currently no solution available for this exercise. This textbook adaptation is a community effort. Do consider contributing by providing a solution for this exercise, using a Pull Request in <a address="https://github.com/source-academy/sicp" href="https://github.com/source-academy/sicp">Github</a>.</div>
      </div>
    
</EXERCISE></div>


  
    <div class="permalink">
    <a name="ex_3.35" class="permalink"></a><EXERCISE><b><a class="exercise-number permalink" id="ex_3.35">Exercise 3.35 </a></b> 
  
    
    Ben Bitdiddle tells Louis that one way to avoid the trouble in
    exercise <REF NAME="ex:squarer-constraint"><a class="superscript" id="3.3.5-ex-link-3.34" href="./3.3.5.html#ex_3.34">3.34</a></REF> is to define a
    squarer as a new primitive constraint.  Fill in the missing
    portions in Ben's outline for a
    
      <span style="color:teal">procedure</span>
      <span style="color:blue">function</span>
    
    to implement such a constraint:
    <table width="100%">
          <colgroup><col width="48%"><col width="52%"></colgroup>
          
          <tr>
            <td><div class='snippet' id='javascript_64_17_div'><div class='pre-prettyprint'><pre class='prettyprint no-eval'>
(define (squarer a b)
  (define (process-new-value)
    (if (has-value? b)
        (if (< (get-value b) 0)
            (error "square less than 0 - - SQUARER" (get-value b))
            ^alternative1^)
        ^alternative2^))
  (define (process-forget-value) ^body1^)
    (define (me request) ^body2^)
  ^rest of definition^
  me)</pre></div></div>    </td>
            <td><div class='snippet' id='javascript_64_17_div'><div class='pre-prettyprint'><pre class='prettyprint no-eval'>
function squarer(a, b) {
    function process_new_value() {
        if (has_value(b)) {
            if (get_value(b) < 0) {
                error(get_value(b),
                      "Square less than 0 in squarer");
            } else {
                // alternative1...
            } else {
                // alternative2...
            }
        }
    }
    function process_forget_value() {
        // body1...
    }
    function me(request) {
        // body2...
    }
    // rest of definition
    return me;
}</pre></div></div></td></tr></table>
  
      <div class="Solution">
      <div class="solution_btn"><button class="btn btn-secondary solution_btn" href="#no_solution_64_3_div" data-toggle="collapse">Add solution</button></div>
      <div class="solution_content collapse" id="no_solution_64_3_div">There is currently no solution available for this exercise. This textbook adaptation is a community effort. Do consider contributing by providing a solution for this exercise, using a Pull Request in <a address="https://github.com/source-academy/sicp" href="https://github.com/source-academy/sicp">Github</a>.</div>
      </div>
    
</EXERCISE></div>


  
    <div class="permalink">
    <a name="ex_3.36" class="permalink"></a><EXERCISE><b><a class="exercise-number permalink" id="ex_3.36">Exercise 3.36 </a></b> 
  
    Suppose we evaluate the following sequence of expressions in the
    
      <span style="color:teal">global</span>
      <span style="color:blue">program</span>
    
    environment:
    <table width="100%">
          <colgroup><col width="48%"><col width="52%"></colgroup>
          
          <tr>
            <td><div class='snippet' id='javascript_64_18_div'><div class='pre-prettyprint'><pre class='prettyprint no-eval'>
(define a (make-connector))
(define b (make-connector))
(set-value! a 10 'user)</pre></div></div>    </td>
            <td><div class='snippet' id='javascript_64_18_div'><div class='pre-prettyprint'><pre class='prettyprint no-eval'>
const a = make_connector();
const b = make_connector();
set_value(a, 10, "user");</pre></div></div></td></tr></table>
    At some time during evaluation of the
    
      <span style="color:teal"><kbd>set-value!</kbd>,</span>
      <span style="color:blue"><kbd>set_value</kbd>,</span>
    
    the following expression from the connector's local
    
      <span style="color:teal">procedure</span>
      <span style="color:blue">function</span>
    
    is evaluated:
    <table width="100%">
          <colgroup><col width="48%"><col width="52%"></colgroup>
          
          <tr>
            <td><div class='snippet' id='javascript_64_19_div'><div class='pre-prettyprint'><pre class='prettyprint no-eval'>
(for-each-except setter inform-about-value constraints)</pre></div></div>    </td>
            <td><div class='snippet' id='javascript_64_19_div'><div class='pre-prettyprint'><pre class='prettyprint no-eval'>
for_each_except(setter, inform_about_value, constraints);</pre></div></div></td></tr></table>
    Draw an environment diagram showing the environment in which the above
    expression is evaluated.
  
      <div class="Solution">
      <div class="solution_btn"><button class="btn btn-secondary solution_btn" href="#no_solution_64_4_div" data-toggle="collapse">Add solution</button></div>
      <div class="solution_content collapse" id="no_solution_64_4_div">There is currently no solution available for this exercise. This textbook adaptation is a community effort. Do consider contributing by providing a solution for this exercise, using a Pull Request in <a address="https://github.com/source-academy/sicp" href="https://github.com/source-academy/sicp">Github</a>.</div>
      </div>
    
</EXERCISE></div>


  
    <div class="permalink">
    <a name="ex_3.37" class="permalink"></a><EXERCISE><b><a class="exercise-number permalink" id="ex_3.37">Exercise 3.37 </a></b> 
  
    The
    
      <span style="color:teal"><kbd>celsius-fahrenheit-converter</kbd></span>
      <span style="color:blue">
	<kbd>celsius_fahrenheit_converter</kbd>
      </span>
    
    
      <span style="color:teal">procedure</span>
      <span style="color:blue">function</span>
    
    is cumbersome when
    compared with a more expression-oriented style of definition, such as
        
    <table width="100%">
          <colgroup><col width="48%"><col width="52%"></colgroup>
          
          <tr>
            <td><div class='snippet' id='javascript_64_20_div'><div class='pre-prettyprint'><pre class='prettyprint no-eval'>
(define (celsius-fahrenheit-converter x)
  (c+ (c* (c/ (cv 9) (cv 5))
          x)
      (cv 32)))

(define C (make-connector))
(define F (celsius-fahrenheit-converter C))</pre></div></div>    </td>
            <td><div class='snippet' id='javascript_64_20_div'><div class='pre-prettyprint'><pre class='prettyprint no-eval'>
function celsius_fahrenheit_converter(x) {
    return cplus(cmul(cdiv(cv(9), cv(5)), x), cv(32));
}</pre></div></div></td></tr></table>
    Here
    
      <span style="color:teal"><kbd>c+</kbd>,</span>
      <span style="color:blue"><kbd>cplus</kbd>,</span>
    
    
      <span style="color:teal"><kbd>c*</kbd>,</span>
      <span style="color:blue"><kbd>cmul</kbd>,</span>
    
    etc. are the <QUOTE>constraint</QUOTE>
    versions of the  arithmetic operations.  For example,
    
      <span style="color:teal"><kbd>c+</kbd></span>
      <span style="color:blue"><kbd>cplus</kbd></span>
    
    takes two connectors as arguments and returns a connector that is
    related to these by an adder constraint:
    <table width="100%">
          <colgroup><col width="48%"><col width="52%"></colgroup>
          
          <tr>
            <td><div class='snippet' id='javascript_64_21_div'><div class='pre-prettyprint'><pre class='prettyprint no-eval'>
(define (c+ x y)
  (let ((z (make-connector)))
    (adder x y z)
    z))</pre></div></div>    </td>
            <td><div class='snippet' id='javascript_64_21_div'><div class='pre-prettyprint'><pre class='prettyprint no-eval'>
function cplus(x, y) {
    const z = make_connector();
    adder(x, y, z);
    return z;
}</pre></div></div></td></tr></table>
    Define analogous
    
      <span style="color:teal">procedures</span>
      <span style="color:blue">functions</span>
    
    
      <span style="color:teal"><kbd>c-</kbd>,</span>
      <span style="color:blue"><kbd>cminus</kbd>,</span>
    
    
      <span style="color:teal"><kbd>c*</kbd>,</span>
      <span style="color:blue"><kbd>cmul</kbd>,</span>
    
    
      <span style="color:teal"><kbd>c/</kbd>,</span>
      <span style="color:blue"><kbd>cdiv</kbd>,</span>
    
    and
    <kbd>cv</kbd>
    (constant value) that enable us to define compound constraints as in
    the converter example above.<a class='superscript' id='footnote-link-3' href='#footnote-3'>[3]</a>
  
      <div class="Solution">
      <div class="solution_btn"><button class="btn btn-secondary solution_btn" href="#no_solution_64_5_div" data-toggle="collapse">Add solution</button></div>
      <div class="solution_content collapse" id="no_solution_64_5_div">There is currently no solution available for this exercise. This textbook adaptation is a community effort. Do consider contributing by providing a solution for this exercise, using a Pull Request in <a address="https://github.com/source-academy/sicp" href="https://github.com/source-academy/sicp">Github</a>.</div>
      </div>
    
</EXERCISE></div>

  
  

<hr>

    <div class='footnote'>
      <a class='footnote-number' id='footnote-1' href='#footnote-link-1' >[1] </a>
    <FOOTNOTE>
    Constraint propagation first appeared in the incredibly
    forward-looking 
    
    SKETCHPAD system of
    
    Ivan Sutherland (1963).  A beautiful constraint-propagation system based
    on the 
    
    Smalltalk language was developed by 
    
    Alan Borning (1977) at 
    
    Xerox Palo Alto Research Center.  Sussman, Stallman, and Steele
    
    
    
    
    
    
    applied constraint propagation to electrical circuit analysis 
    (<CITATION>Sussman and Stallman 1975</CITATION>; 
    <CITATION>Sussman and Steele 1980</CITATION>). 
    TK!Solver (<CITATION>Konopasek and Jayaraman 1984</CITATION>) 
    is an extensive modeling environment based on constraints.
    </FOOTNOTE></div>
    
    
    <div class='footnote'>
      <a class='footnote-number' id='footnote-2' href='#footnote-link-2' >[2] </a>
    <FOOTNOTE>
    The
    <kbd>setter</kbd> might not be a constraint.  In our
    temperature example, we used <kbd>user</kbd> as the
    <kbd>setter</kbd>.
    </FOOTNOTE></div>
    
    
    <div class='footnote'>
      <a class='footnote-number' id='footnote-3' href='#footnote-link-3' >[3] </a>
    <FOOTNOTE>
    The expression-oriented format
    is convenient because it avoids the need to name the intermediate
    expressions in a computation.  Our original formulation of the
    
    
    
    
    
    constraint language is cumbersome in the same way that many languages
    are cumbersome when dealing with operations on compound data.  For
    example, if we wanted to compute the product
    ${(a+b)}\cdot{(c+d)}$, where the
    variables represent vectors, we could work in
    <QUOTE>imperative style,</QUOTE>
    using
    
      <span style="color:teal">procedures</span>
      <span style="color:blue">functions</span>
    
    that set the values of designated vector arguments
    but do not themselves return vectors as values:
    <table width="100%">
          <colgroup><col width="48%"><col width="52%"></colgroup>
          
          <tr>
            <td><div class='snippet' id='javascript_64_22_div'><div class='pre-prettyprint'><pre class='prettyprint no-eval'>
(v-sum a b temp1)
(v-sum c d temp2)
(v-prod temp1 temp2 answer)</pre></div></div>    </td>
            <td><div class='snippet' id='javascript_64_22_div'><div class='pre-prettyprint'><pre class='prettyprint no-eval'>
v_sum('a', 'b', temp1);
v_sum('c', 'd', temp2);
v_prod(temp1, temp2, answer);</pre></div></div></td></tr></table>
    Alternatively, we could deal with expressions, using
    
      <span style="color:teal">procedures</span>
      <span style="color:blue">functions</span>
    
    that return vectors as values, and thus avoid
    explicitly mentioning <kbd>temp1</kbd> and
    <kbd>temp2</kbd>:
    <table width="100%">
          <colgroup><col width="48%"><col width="52%"></colgroup>
          
          <tr>
            <td><div class='snippet' id='javascript_64_23_div'><div class='pre-prettyprint'><pre class='prettyprint no-eval'>
(define answer (v-prod (v-sum a b) (v-sum c d)))</pre></div></div>    </td>
            <td><div class='snippet' id='javascript_64_23_div'><div class='pre-prettyprint'><pre class='prettyprint no-eval'>
const answer = v_prod(v_sum('a', 'b'), v_sum('c', 'd'));</pre></div></div></td></tr></table>
    Since
    
      <span style="color:teal">Lisp</span>
      <span style="color:blue">JavaScript</span>
    
    allows us to return compound objects as values of
    
      <span style="color:teal">procedures,</span>
      <span style="color:blue">functions,</span>
    
    we can transform our imperative-style constraint language
    into an expression-oriented style as shown in this exercise.  In
    languages that are impoverished in handling compound objects, such as
    Algol, Basic, and Pascal (unless one explicitly uses Pascal pointer
    variables), one is usually stuck with the imperative style when
    manipulating compound objects.  Given the advantage of the
    expression-oriented format, one might ask if there is any reason to
    have implemented the system in imperative style, as we did in this
    section.  One reason is that the non-expression-oriented constraint
    language provides a handle on constraint objects (e.g., the value of
    the <kbd>adder</kbd>
    
      <span style="color:teal">procedure)</span>
      <span style="color:blue">function)</span>
    
    as well as on connector objects.  This is
    useful if we wish to extend the system with new operations that
    communicate with constraints directly rather than only indirectly via
    operations on connectors.  Although it is easy to implement the
    expression-oriented style in terms of the imperative implementation,
    it is very difficult to do the converse.
    </FOOTNOTE></div>
    
    
</SUBSECTION></div></div>

    <div class='nav'>
  
        <a class='btn btn-secondary btn-nav' href='./3.3.4.html'>&lt; Previous</a>
    
    <div style='flex-grow: 1;'></div>
  
        <a class='btn btn-secondary btn-nav' id='66' href='./3.4.html'>Next &gt;</a>
      </div>
    <div class='chapter_sign'>
      3.3.5  Propagation of Constraints
    </div>
    <script> var chapter_id = 65; </script>
    <script> var chapter_path = "chapters/3.3.5.html"; </script>
    <div class='next-page'></div>
    </div>
    </div> <!-- /.container -->
    </body></html>